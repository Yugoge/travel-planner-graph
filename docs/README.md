# docs/

Documentation and workflow JSON storage.

---

## Purpose

This folder stores workflow JSONs created during orchestrated command execution (/clean, /dev, /test). Files are temporary and may be cleared or archived after workflow completion.

**Key principle**: Workflow data is stored as structured JSON for auditability and debugging.

## Allowed File Types

- `.json` files: Workflow context, reports, agent outputs
- `.md` files: Completion reports, summaries
- NO permanent documentation (use root README.md or subdirectory READMEs)

## Naming Convention

- **Subdirectories**: Workflow name (clean/, dev/, test/)
- **JSON files**: `{type}-{request-id}.json`
  - Context: `context-{id}.json`
  - Reports: `{agent}-report-{id}.json`
  - Completion: `completion-{id}.md`

## Organization Rules

### Workflow Subdirectories

Each orchestrated workflow gets its own subdirectory:

**clean/** - Cleanup workflow JSONs
- Created by: `/clean` command
- Content: Inspection reports (cleanliness, style, rules)
- Lifecycle: Created during workflow, may be archived after

**dev/** - Development workflow JSONs
- Created by: `/dev` command
- Content: Dev reports, QA reports, context
- Lifecycle: Created during workflow, may be archived after

**test/** (if created) - Test workflow JSONs
- Created by: `/test` command
- Content: Test reports, validation results
- Lifecycle: Created during workflow, may be archived after

### File Responsibilities

**context-{id}.json**:
- Full workflow context passed to agents
- Contains: User requirements, codebase analysis, discovered folders
- Created by: Orchestrator commands
- Size: Can be large (1M+ tokens of context)

**{agent}-report-{id}.json**:
- Structured report from subagent
- Contains: Agent findings, recommendations, actions taken
- Created by: Subagents (dev, qa, cleaner, inspectors)
- Format: JSON with specific schema per agent

**completion-{id}.md**:
- Human-readable completion report
- Contains: Summary, changes made, next steps
- Created by: Orchestrator commands
- Format: Markdown for user consumption

## File Creation Patterns

**Created by**: Orchestrator commands (/clean, /dev)
**Automation**: 100% automated (never manual)
**Lifecycle**: Temporary (cleared or archived)

**Pattern**:
1. User invokes command: `/dev "fix bug X"`
2. Orchestrator creates: `docs/dev/context-{id}.json`
3. Subagents write: `docs/dev/{agent}-report-{id}.json`
4. Orchestrator writes: `docs/dev/completion-{id}.md`
5. After review: Files archived or deleted

## Standards

### JSON Files

1. **Valid JSON**: Must parse without errors
2. **Pretty-printed**: Use 2-space indentation
3. **UTF-8 encoding**: Support international characters
4. **Large files OK**: Context JSONs can exceed 1MB

### Markdown Files

1. **Completion reports**: Use structured format
2. **Sections**: Summary, Changes, Next Steps, Git Analysis
3. **Code snippets**: Include file paths with line numbers

### Lifecycle Management

**During workflow**:
- Files created in real-time
- Agents read/write JSON files
- Orchestrator aggregates results

**After workflow**:
- Option 1: Archive to `docs/archive/YYYY-MM/`
- Option 2: Delete (if no historical value)
- Option 3: Keep for debugging (temporary)

**Recommendation**: Archive important workflows, delete routine ones.

## Current State

**clean/**: Empty (no active cleanup workflows)
**dev/**: Empty (no active development workflows)

**Interpretation**: Normal state between workflow executions.

## Integration with Commands

### /clean Command

Workflow:
1. Create `docs/clean/context-{id}.json`
2. Run inspectors → write `{inspector}-report-{id}.json`
3. Run cleaner → write `cleaner-report-{id}.json`
4. Generate `docs/clean/completion-{id}.md`
5. Present to user for approval

### /dev Command

Workflow:
1. Create `docs/dev/context-{id}.json`
2. Run dev agent → write `dev-report-{id}.json`
3. Run QA agent → write `qa-report-{id}.json`
4. Iterate if needed (multi-round)
5. Generate `docs/dev/completion-{id}.md`
6. Present to user for git commit

## Git Analysis

<!-- AUTO-GENERATED by rule-inspector - DO NOT EDIT -->
First created: Unknown (workflow-created)
Purpose: Temporary workflow storage
Typical contents: 0-10 files (varies by active workflows)
Lifecycle: Temporary (cleared/archived periodically)
<!-- END AUTO-GENERATED -->

---

*This README documents the organization rules for docs/. Generated by rule-inspector from git history analysis.*
