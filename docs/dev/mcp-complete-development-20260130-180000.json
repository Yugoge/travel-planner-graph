{
  "request_id": "dev-mcp-complete-20260130",
  "timestamp": "2026-01-30T18:00:00Z",
  "priority": "HIGH",
  "objective": "Complete MCP verification and development for 7 services (4 npm + 3 GitHub)",

  "requirement": {
    "original": "airbnb的协议对吗？天气选用rating最多的一个，其他新增的都全部进一步开发纳入我目前的skills和subagents",
    "clarified": "Verify Airbnb MCP protocol, select highest-rated weather MCP, develop all new MCPs (npm + GitHub) with 100% tool coverage and agent integration",
    "what": "Complete MCP skill development for 7 services",
    "why": "Prevent tool name errors (like Google Maps BUG), ensure production-ready skills",
    "where": [
      ".claude/skills/airbnb/ (VERIFY)",
      ".claude/skills/weather/ (CREATE with @dangahagan/weather-mcp)",
      ".claude/skills/eventbrite/ (CREATE)",
      ".claude/skills/amadeus-flight/ (VERIFY & FIX)",
      ".claude/skills/12306/ (CREATE from GitHub)",
      ".claude/skills/duffel-flights/ (CREATE from GitHub)",
      ".claude/skills/yelp/ (RECREATE from GitHub)",
      ".claude/agents/*.md (INTEGRATE)"
    ],
    "scope": {
      "included": [
        "Download & verify 4 npm packages",
        "Clone & build 3 GitHub projects",
        "Inspect source code for all 7 MCPs",
        "Verify/fix tool names in existing skills",
        "Create new skills for missing MCPs",
        "100% tool coverage for each MCP",
        "Update/create SKILL.md for all",
        "Integrate into relevant agents",
        "Generate verification reports",
        "Test with API keys (when provided)"
      ],
      "excluded": [
        "API key acquisition",
        "TripAdvisor (deleted - doesn't exist)",
        "Jinko Hotel (deleted - doesn't exist)",
        "Production deployment",
        "Agent workflow redesign"
      ]
    },
    "success_criteria": [
      "All 7 MCPs verified/developed",
      "100% tool coverage (N/N for each)",
      "Tool names verified from source code",
      "Python scripts working for all tools",
      "SKILL.md complete for all",
      "Agents integrated correctly",
      "Amadeus bug fixed (search_flights → get_flights)",
      "No tool name assumptions",
      "Ready for testing when API keys provided"
    ],
    "constraints": [
      "Follow Google Maps verification pattern",
      "GitHub projects must be built locally",
      "No hardcoded API keys",
      "Environment variables for credentials",
      "DRY principle - SKILL.md as single source"
    ]
  },

  "mcps_to_develop": {
    "npm_packages": {
      "airbnb": {
        "package": "@openbnb/mcp-server-airbnb",
        "version": "0.1.3",
        "status": "exists_needs_verification",
        "current_scripts": ["search.py", "details.py"],
        "priority": 1
      },
      "weather": {
        "package": "@dangahagan/weather-mcp",
        "version": "1.6.1",
        "status": "create_new",
        "replaces": "openweathermap",
        "current_scripts": [],
        "priority": 1
      },
      "eventbrite": {
        "package": "@mseep/eventbrite-mcp",
        "version": "1.0.1",
        "status": "create_new",
        "current_scripts": [],
        "priority": 2
      },
      "amadeus_flight": {
        "package": "amadeus-mcp-server",
        "version": "latest",
        "status": "exists_has_bugs",
        "bug": "search_flights should be get_flights",
        "current_scripts": ["search.py", "details.py", "pricing.py"],
        "priority": 1
      }
    },
    "github_projects": {
      "12306": {
        "repo": "https://github.com/Joooook/12306-mcp.git",
        "status": "clone_and_build",
        "build_steps": ["npm install", "npm run build"],
        "current_scripts": [],
        "priority": 2
      },
      "duffel_flights": {
        "repo": "https://github.com/ravinahp/flights-mcp",
        "status": "clone_and_build",
        "build_steps": ["npm install", "npm run build"],
        "note": "Read-only flight search, needs Duffel API key",
        "current_scripts": [],
        "priority": 3
      },
      "yelp": {
        "repo": "https://github.com/Yelp/yelp-mcp",
        "status": "clone_and_build",
        "replaces": "existing_broken_yelp",
        "build_steps": ["npm install", "npm run build"],
        "current_scripts": ["search.py", "details.py"],
        "priority": 2
      }
    }
  },

  "reference_pattern": {
    "google_maps_verified": {
      "problem": "Assumed 3 tools, actually had 7 with wrong names",
      "solution": "Downloaded package, inspected dist/index.js",
      "result": "7/7 (100%) verified, all tests passed"
    },
    "amadeus_bug_found": {
      "problem": "search_flights tool doesn't exist",
      "actual": "get_flights is the correct tool name",
      "fix": "Update scripts/search.py to use get_flights"
    }
  },

  "context": {
    "codebase_state": {
      "existing_skills": {
        "working": ["google-maps", "gaode-maps"],
        "needs_verification": ["airbnb", "amadeus-flight"],
        "needs_creation": ["weather", "eventbrite", "12306", "duffel-flights"],
        "needs_replacement": ["yelp"],
        "to_delete": ["tripadvisor", "jinko-hotel"]
      },
      "agents": {
        "transportation": "uses gaode-maps, google-maps, amadeus-flight",
        "meals": "uses gaode-maps, google-maps, yelp",
        "accommodation": "uses gaode-maps, google-maps, airbnb",
        "attractions": "uses gaode-maps, google-maps, tripadvisor",
        "shopping": "uses gaode-maps, google-maps",
        "entertainment": "uses gaode-maps, google-maps, eventbrite"
      }
    },
    "verification_workflow": {
      "npm_packages": [
        "1. Download: npm pack <package>",
        "2. Extract: tar -xzf <tarball>",
        "3. Find tool definitions in dist/ or src/",
        "4. Compare actual vs claimed tools",
        "5. Fix mismatches, create missing scripts"
      ],
      "github_projects": [
        "1. Clone: git clone <repo>",
        "2. Build: npm install && npm run build",
        "3. Find tool definitions (usually in dist/ or lib/)",
        "4. Create Python scripts for all tools",
        "5. Create SKILL.md"
      ]
    },
    "dependencies": {
      "runtime": "Python 3.x, Node.js, npm, git",
      "credentials": {
        "airbnb": "AIRBNB_API_KEY (optional)",
        "weather": "WEATHER_API_KEY",
        "eventbrite": "EVENTBRITE_API_KEY",
        "amadeus": "AMADEUS_API_KEY + AMADEUS_API_SECRET",
        "12306": "12306_ACCOUNT (optional)",
        "duffel": "DUFFEL_API_KEY",
        "yelp": "YELP_API_KEY"
      }
    }
  },

  "development_approach": {
    "strategy": "Parallel verification + sequential GitHub clone/build",
    "phase_1_npm_verification": {
      "airbnb": "Download, inspect, verify tool names",
      "weather": "Download, inspect, create full skill",
      "eventbrite": "Download, inspect, create full skill",
      "amadeus": "Verify bug fix (search_flights → get_flights)"
    },
    "phase_2_github_development": {
      "12306": "Clone, build, create skill",
      "duffel": "Clone, build, create skill",
      "yelp": "Clone, build, replace existing skill"
    },
    "phase_3_agent_integration": {
      "update_agents": "Integrate new skills into agents",
      "remove_references": "Remove tripadvisor, jinko-hotel",
      "verify_consistency": "Check all agent skill declarations"
    },
    "phase_4_testing": {
      "without_keys": "Verify tool names, scripts syntax",
      "with_keys": "Test actual API calls (when provided)"
    }
  },

  "deliverables": {
    "per_mcp": [
      "SKILL.md with complete tool list",
      "Python scripts for all tools",
      "mcp_client.py (reuse pattern)",
      "Verification report"
    ],
    "master_deliverables": [
      "7 skills ready for production",
      "Agent integration complete",
      "Deleted broken skills (tripadvisor, jinko-hotel)",
      "Master verification summary",
      "Next steps document (API keys needed)"
    ]
  },

  "standards_to_enforce": {
    "no_hardcoded_values": true,
    "use_environment_variables": true,
    "skill_md_single_source": true,
    "python_scripts_via_bash": true,
    "100_percent_coverage": true,
    "tool_names_verified_from_source": true,
    "github_projects_built_locally": true,
    "no_assumptions_from_docs": true
  }
}
