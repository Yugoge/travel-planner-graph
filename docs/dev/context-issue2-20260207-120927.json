{
  "request_id": "dev-issue2-20260207-120927",
  "timestamp": "2026-02-07T12:09:27Z",
  "issue_number": 2,
  "priority": "P2",
  "requirement": {
    "original": "Period为什么没有？这个肯定是系统性字段吧？",
    "clarified": "Add 'period' field to trip_summary display, calculated from duration_days (e.g., '21 days')",
    "what": "Display human-readable period in trip summary",
    "why": "Users need to see trip duration in natural language, not just dates",
    "where": [
      "scripts/generate-html-interactive.py trip_summary preparation",
      "HTML TripSummary component PropertyRow section"
    ],
    "scope": {
      "included": [
        "Calculate period from duration_days field",
        "Add period PropertyRow to HTML display",
        "Format as '{N} days' or '{N} day' for singular"
      ],
      "excluded": [
        "Modifying skeleton.json structure",
        "Changing date calculation logic"
      ]
    },
    "success_criteria": [
      "Period displays as '{N} days' in trip summary",
      "Singular form used when duration_days = 1",
      "Field calculated from existing duration_days data"
    ],
    "constraints": [
      "Use existing duration_days field from trip_summary",
      "No backend changes required"
    ]
  },
  "root_cause_analysis": {
    "symptom": "No period field displayed in trip summary",
    "root_cause": "Field never implemented despite being logical system field",
    "root_cause_commit": "Unknown - missing from original implementation",
    "why_introduced": "Oversight in original trip summary design",
    "why_problematic": "Users see dates but no clear duration statement",
    "timeline": "Missing since initial implementation",
    "affected_files": [
      "scripts/generate-html-interactive.py"
    ]
  },
  "context": {
    "codebase_state": "Clean working directory",
    "file_contents": {
      "plan-skeleton.json": {
        "trip_summary": {
          "dates": "2026-02-15 to 2026-03-07",
          "duration_days": 21
        }
      }
    }
  },
  "development_approach": {
    "strategy": "Calculate period string from duration_days in _prepare_data(), add PropertyRow",
    "files_to_modify": [
      "scripts/generate-html-interactive.py"
    ],
    "changes_needed": [
      "Add period calculation: f'{duration_days} day{\"s\" if duration_days != 1 else \"\"}'",
      "Add PropertyRow after dates field in TripSummary component"
    ],
    "validation_approach": "Regenerate HTML, verify period displays correctly"
  },
  "standards_to_enforce": {
    "no_hardcoded_values": true,
    "use_source_venv": true,
    "meaningful_naming": true,
    "git_root_cause_reference": true
  }
}
