{
  "request_id": "dev-20260131-add-rednote-mcp",
  "timestamp": "2026-01-31T12:52:00Z",
  "requirement": {
    "original": "添加对小红书mcp的skill支持：https://github.com/iFurySt/RedNote-MCP",
    "clarified": "Add RedNote (小红书) MCP skill to travel-planner project for searching travel content (attractions, meals, shopping, entertainment) from Chinese social media platform",
    "what": "Create new skill directory structure for RedNote MCP with documentation, examples, and integration into 4 travel agents",
    "why": "RedNote is a major Chinese social platform with rich UGC travel content - reviews, recommendations, and guides for destinations, restaurants, and activities",
    "where": [
      ".claude/skills/rednote/",
      ".claude/agents/attractions.md",
      ".claude/agents/meals.md",
      ".claude/agents/shopping.md",
      ".claude/agents/entertainment.md"
    ],
    "scope": {
      "included": [
        "Create .claude/skills/rednote/ directory",
        "Create SKILL.md documentation",
        "Create examples/ directory with usage examples",
        "Update 4 agent files to include rednote skill",
        "Document authentication via rednote-mcp init",
        "Document MCP server configuration",
        "Document available tools and capabilities"
      ],
      "excluded": [
        "Actual MCP server installation (user will do npm install -g rednote-mcp)",
        "Cookie authentication setup (user will run rednote-mcp init manually)",
        "Testing with real API (requires manual login first)",
        "Python scripts (this is npm-based MCP, uses JSON-RPC directly)"
      ]
    },
    "success_criteria": [
      "Skill directory created with proper structure matching existing skills",
      "SKILL.md documentation complete with tool descriptions and examples",
      "4 agent files updated to include rednote in skills list",
      "Examples directory with practical usage scenarios",
      "Clear authentication instructions for manual setup",
      "All documentation follows existing pattern (see duffel-flights/SKILL.md)"
    ],
    "constraints": [
      "MCP requires npm global install (npm install -g rednote-mcp)",
      "Requires manual login via rednote-mcp init to get cookies",
      "Cookie stored at ~/.mcp/rednote/cookies.json",
      "Node.js ≥ 16 required",
      "Playwright browser automation required",
      "Chinese language content (tool names may be in Chinese)"
    ],
    "user_decisions": {
      "authentication": "manual_login_via_init",
      "target_agents": ["attractions", "meals", "shopping", "entertainment"],
      "installation": "npm_global_install"
    }
  },
  "root_cause_analysis": {
    "symptom": "RedNote MCP skill does not exist in travel-planner",
    "root_cause": "New skill addition - not fixing existing issue",
    "context": "This is a NEW FEATURE REQUEST, not a bug fix. No root cause commit to analyze.",
    "approach": "Follow existing skill patterns established in gaode-maps, google-maps, duffel-flights, weather, airbnb",
    "reference_skills": [
      "gaode-maps (Chinese service with manual setup)",
      "duffel-flights (comprehensive SKILL.md with examples)",
      "airbnb (npm-based MCP)"
    ]
  },
  "context": {
    "codebase_state": "Clean working directory with 7 existing skills",
    "existing_skills": [
      "airbnb",
      "duffel-flights",
      "gaode-maps",
      "google-maps",
      "test-mcp",
      "weather"
    ],
    "skill_patterns": {
      "directory_structure": "skills/<name>/{SKILL.md, examples/, scripts/}",
      "documentation_format": "YAML frontmatter + markdown with tool descriptions",
      "agent_integration": "Add skill name to agents/<name>.md YAML skills list"
    },
    "dependencies": {
      "runtime": "Node.js ≥ 16, npm ≥ 7",
      "packages": "rednote-mcp (npm), playwright (auto-installed)"
    },
    "environment": {
      "config_location": "~/.config/Claude/claude_desktop_config.json",
      "cookie_location": "~/.mcp/rednote/cookies.json"
    },
    "rednote_mcp_info": {
      "repository": "https://github.com/iFurySt/RedNote-MCP",
      "npm_package": "rednote-mcp",
      "server_command": "rednote-mcp",
      "protocol": "JSON-RPC 2.0 over stdio",
      "capabilities": [
        "Keyword-based note searching",
        "Note content access via URL",
        "Comment content access (incomplete feature)",
        "Cookie-based authentication"
      ],
      "init_command": "rednote-mcp init"
    }
  },
  "development_approach": {
    "strategy": "Create skill structure following existing patterns, document MCP tools and usage",
    "files_to_create": [
      ".claude/skills/rednote/SKILL.md",
      ".claude/skills/rednote/examples/search-notes.md",
      ".claude/skills/rednote/examples/content-access.md"
    ],
    "files_to_modify": [
      ".claude/agents/attractions.md",
      ".claude/agents/meals.md",
      ".claude/agents/shopping.md",
      ".claude/agents/entertainment.md"
    ],
    "validation_approach": "QA will verify structure matches existing skills, documentation is complete, agents updated correctly"
  },
  "standards_to_enforce": {
    "no_hardcoded_values": true,
    "meaningful_naming": true,
    "follow_existing_patterns": true,
    "complete_documentation": true,
    "chinese_language_support": true
  }
}
