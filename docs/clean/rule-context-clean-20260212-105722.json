{
  "request_id": "clean-20260212-105722",
  "timestamp": "2026-02-12T10:57:22Z",
  "inspector": "rule-inspector",
  "project_root": "/root/travel-planner",
  "analysis_date": "2026-02-12",
  "discoveries": [
    {
      "folder": "root/",
      "purpose": "Project entry point and high-level documentation",
      "allowed_file_types": [".md", ".html", ".json", ".txt", ".plan"],
      "naming_convention": "kebab-case (docs), mixed-case (config)",
      "organization_rules": [
        "README.md: Project overview with live site link and travel plans listing",
        "index.html: GitHub Pages entry point (static site)",
        ".env: Environment configuration (NOT committed)",
        ".nojekyll: GitHub Pages marker (prevents Jekyll processing)",
        "package.json: Node.js dependencies",
        "requirements.txt: Python dependencies",
        ".plan: Project plan document",
        ".gitignore: Exclude venv, node_modules, .env"
      ],
      "creation_patterns": {
        "primary_creator": "Manual project initialization",
        "automation_percentage": 0
      },
      "git_analysis": {
        "first_created": "2026-01-29",
        "total_commits": 280,
        "last_significant_update": "2026-02-12",
        "recent_activity_days": 14,
        "recent_commits_count": 127
      },
      "readme_status": {
        "exists": true,
        "age_days": 1,
        "freshness": "FRESH",
        "action": "skip"
      },
      "index_md_status": {
        "exists": false,
        "needs_creation": false,
        "reason": "Root level does not require inventory file"
      },
      "readme_md_generated": false,
      "index_files_generated": false
    },
    {
      "folder": "config/",
      "purpose": "Configuration templates for MCP servers and project settings",
      "allowed_file_types": [".json"],
      "naming_convention": "kebab-case with -config.json suffix",
      "organization_rules": [
        "Config files: kebab-case with -config.json suffix (currency-config.json, mcp-config-template.json)",
        "Only JSON files allowed (no YAML, no XML)",
        "Templates contain placeholders for user customization",
        "Environment variables referenced via ${VARIABLE_NAME:-default} pattern",
        "Fallback images stored as URL references",
        "Currency rates updated when >5% change"
      ],
      "file_responsibilities": {
        "currency-config.json": "USD/CNY conversion rates and currency symbols",
        "fallback-images.json": "Default placeholder images for POI types (attraction, meal, shopping, etc.)",
        "mcp-config-template.json": "MCP server configuration template with environment variable references"
      },
      "creation_patterns": {
        "primary_creator": "Manual project setup",
        "automation_percentage": 0
      },
      "git_analysis": {
        "first_created": "2026-02-03",
        "total_commits": 6,
        "last_significant_update": "2026-02-11",
        "recent_commits_5days": 6
      },
      "readme_status": {
        "exists": true,
        "age_days": 1,
        "freshness": "FRESH",
        "action": "skip"
      },
      "index_md_status": {
        "exists": true,
        "age_days": 0,
        "freshness": "FRESH",
        "action": "skip",
        "file_count": 5
      },
      "readme_md_generated": false,
      "index_files_generated": false
    },
    {
      "folder": "data/",
      "purpose": "Travel plan data storage in structured JSON format",
      "allowed_file_types": [".json"],
      "naming_convention": "kebab-case for directories and files",
      "organization_rules": [
        "Trip directories: kebab-case with pattern {destination}-{duration}-{dates}",
        "Required files per trip: requirements-skeleton.json, plan-skeleton.json, timeline.json",
        "Optional files: transportation.json, accommodation.json, attractions.json, meals.json, entertainment.json, shopping.json, budget.json",
        "Test directories: test-* prefix (test-trip/)",
        "Active trips stored in root data/ directory",
        "Completed/archived trips stored in data/archive/YYYY-MM/",
        "Timeline must have continuous day coverage (no gaps)",
        "Location continuity: end location of day N = start location of day N+1"
      ],
      "file_responsibilities": {
        "requirements-skeleton.json": "Trip requirements/constraints (user input)",
        "plan-skeleton.json": "Generated trip plan (agent output)",
        "timeline.json": "Day-by-day schedule with activities",
        "*-skeleton.json": "Template files for development",
        "*-broken.json": "Test fixtures for validation testing"
      },
      "creation_patterns": {
        "primary_creator": "Manual user input + planning scripts (50/50)",
        "automation_percentage": 50
      },
      "git_analysis": {
        "first_created": "2026-01-29",
        "total_commits": 85,
        "last_significant_update": "2026-02-12",
        "recent_commits_5days": 84
      },
      "readme_status": {
        "exists": true,
        "age_days": 1,
        "freshness": "FRESH",
        "action": "skip"
      },
      "index_md_status": {
        "exists": true,
        "age_days": 0,
        "freshness": "FRESH",
        "action": "skip",
        "file_count": 40,
        "subdirectories": 3
      },
      "readme_md_generated": false,
      "index_files_generated": false
    },
    {
      "folder": "docs/",
      "purpose": "Workflow documentation and orchestrated command output JSONs",
      "allowed_file_types": [".json", ".md"],
      "naming_convention": "kebab-case for subdirectories, {type}-{request-id}.{ext} for files",
      "organization_rules": [
        "Subdirectories: clean/, dev/, test/, guides/, reference/, reports/",
        "clean/ - Cleanup workflow JSONs from /clean command",
        "dev/ - Development workflow JSONs from /dev command",
        "test/ - Test workflow JSONs from /test command",
        "guides/ - Reference documentation and guides",
        "reference/ - Reference materials and specifications",
        "reports/ - Workflow reports and completion documents",
        "Workflow JSONs: context-{id}.json, {agent}-report-{id}.json, completion-{id}.md",
        "Files are temporary and may be archived or deleted after workflow completion"
      ],
      "creation_patterns": {
        "primary_creator": "Automated orchestrator commands (/clean, /dev, /test)",
        "automation_percentage": 100
      },
      "git_analysis": {
        "first_created": "2026-01-29",
        "total_commits": 37,
        "last_significant_update": "2026-02-12",
        "recent_commits_5days": 36
      },
      "readme_status": {
        "exists": true,
        "age_days": 1,
        "freshness": "FRESH",
        "action": "skip"
      },
      "index_md_status": {
        "exists": true,
        "age_days": 0,
        "freshness": "FRESH",
        "action": "skip"
      },
      "readme_md_generated": false,
      "index_files_generated": false
    },
    {
      "folder": "scripts/",
      "purpose": "Helper scripts for travel plan validation, generation, and deployment",
      "allowed_file_types": [".sh", ".py"],
      "naming_convention": "Bash scripts: kebab-case with verb-noun pattern, Python scripts: snake_case",
      "organization_rules": [
        "Validation scripts: check-*.sh, validate-*.sh",
        "Generation scripts: generate-*.sh",
        "Deployment scripts: deploy-*.sh",
        "Python scripts: snake_case per PEP 8",
        "Subdirectories: gaode-maps/, lib/, todo/ for organized modules",
        "All scripts must have proper shebang (#!/usr/bin/env bash or #!/usr/bin/env python3)",
        "Scripts accept parameters (no hardcoded paths)",
        "Exit codes: 0=success, 1=failure, 2=invalid arguments"
      ],
      "script_categories": {
        "validation": [
          "check-day-completion.sh - Verify all trip days have plans",
          "check-location-continuity.sh - Validate location transitions",
          "validate-timeline-consistency.sh - Validate timeline structure",
          "validate-plan-workflow.sh - Comprehensive plan workflow validation"
        ],
        "generation": [
          "generate-and-deploy.sh - Unified atomic generate + deploy",
          "generate-travel-html.sh - Generate interactive HTML (deprecated)"
        ],
        "deployment": [
          "deploy-travel-plans.sh - Deploy HTML to GitHub Pages"
        ],
        "utilities": [
          "lib/html_generator.py - Class-based HTML generation",
          "gaode-maps/*.py - Gaode Maps routing and POI utilities",
          "detect-location-changes.py - Location change detection"
        ]
      },
      "creation_patterns": {
        "primary_creator": "Manual user creation",
        "automation_percentage": 0
      },
      "git_analysis": {
        "first_created": "2026-01-29",
        "total_commits": 94,
        "last_significant_update": "2026-02-12",
        "recent_commits_5days": 94
      },
      "readme_status": {
        "exists": true,
        "age_days": 1,
        "freshness": "FRESH",
        "action": "skip"
      },
      "index_md_status": {
        "exists": false,
        "needs_creation": true,
        "reason": "No inventory file exists yet"
      },
      "readme_md_generated": false,
      "index_files_generated": false
    },
    {
      "folder": "schemas/",
      "purpose": "JSON schema definitions for travel plan data validation",
      "allowed_file_types": [".json", ".md"],
      "naming_convention": "{category}.schema.json for schemas, {topic}-{format}.md for docs",
      "organization_rules": [
        "Schema files: {category}.schema.json (accommodation, attractions, entertainment, meals, shopping, budget, timeline, transportation)",
        "Common schemas: poi-common.schema.json (shared POI fields)",
        "Documentation: POI-data-schema.md, naming-convention.md",
        "All schemas follow JSON Schema Draft 7 specification",
        "2-space indentation required",
        "Each schema has title, description, and field-level documentation",
        "Validation includes min/max, patterns, required fields"
      ],
      "schema_files": {
        "domain_schemas": [
          "accommodation.schema.json - Hotel/lodging structure",
          "attractions.schema.json - Tourist POI format",
          "entertainment.schema.json - Events/shows structure",
          "meals.schema.json - Restaurant POI format",
          "shopping.schema.json - Shopping locations format",
          "budget.schema.json - Cost tracking structure",
          "timeline.schema.json - Daily itinerary format",
          "transportation.schema.json - Inter-city travel format"
        ],
        "common_schemas": [
          "poi-common.schema.json - Reusable POI fields (name, coordinates, address, contact, images, cost)"
        ]
      },
      "creation_patterns": {
        "primary_creator": "Manual schema design + validation scripts (50/50)",
        "automation_percentage": 50
      },
      "git_analysis": {
        "first_created": "2026-02-08",
        "total_commits": 22,
        "last_significant_update": "2026-02-11",
        "recent_commits_5days": 22
      },
      "readme_status": {
        "exists": true,
        "age_days": 1,
        "freshness": "FRESH",
        "action": "skip"
      },
      "index_md_status": {
        "exists": true,
        "age_days": 0,
        "freshness": "FRESH",
        "action": "skip",
        "file_count": 13
      },
      "readme_md_generated": false,
      "index_files_generated": false
    },
    {
      "folder": ".claude/",
      "purpose": "Claude Code configuration directory with MCP skills, subagents, and commands",
      "allowed_file_types": [".json", ".md", ".py", ".sh"],
      "naming_convention": "kebab-case for subdirectories and files",
      "organization_rules": [
        "settings.json - Global Claude Code configuration (API keys via environment variables)",
        "skills/ - MCP skill integrations (7 skills: airbnb, duffel-flights, gaode-maps, google-maps, openmeteo-weather, rednote, shared)",
        "agents/ - Specialized subagent prompts (8 agents: timeline, transportation, accommodation, attractions, meals, entertainment, shopping, budget)",
        "commands/ - Slash command definitions (3 commands: plan, gaode-maps, test-gaode)",
        "Each skill is self-contained with README, scripts/, tools/, examples/",
        "Each agent is single-responsibility and returns structured JSON",
        "Commands are orchestration-only (delegate to agents)"
      ],
      "agent_system": {
        "total_agents": 8,
        "agents": [
          "timeline.md - Day-by-day itinerary generation",
          "transportation.md - Inter-city travel planning",
          "accommodation.md - Hotel/lodging selection",
          "attractions.md - Tourist site recommendations",
          "meals.md - Dining plans and reservations",
          "entertainment.md - Shows, events, nightlife",
          "shopping.md - Shopping locations and items",
          "budget.md - Cost estimation and tracking"
        ]
      },
      "skill_system": {
        "total_skills": 7,
        "skills": [
          "airbnb/ - Airbnb property searches and booking info",
          "duffel-flights/ - Flight search and booking via Duffel API",
          "gaode-maps/ - China-specific routing and POI search",
          "google-maps/ - Global maps, routing, and Places API",
          "openmeteo-weather/ - Weather data for travel planning",
          "rednote/ - Chinese social content and recommendations",
          "shared/ - Shared utilities and common functions"
        ]
      },
      "command_system": {
        "total_commands": 3,
        "commands": [
          "plan.md - Main travel planning orchestrator (16.8KB)",
          "gaode-maps.md - Gaode Maps integration wrapper (5.6KB)",
          "test-gaode.md - Test command for Gaode validation"
        ]
      },
      "creation_patterns": {
        "primary_creator": "Manual agent/command/skill creation",
        "automation_percentage": 0
      },
      "git_analysis": {
        "first_created": "2026-01-29",
        "total_commits": 39,
        "last_significant_update": "2026-02-12",
        "recent_commits_5days": 38
      },
      "readme_status": {
        "exists": true,
        "age_days": 1,
        "freshness": "FRESH",
        "action": "skip"
      },
      "index_md_status": {
        "exists": true,
        "age_days": 0,
        "freshness": "FRESH",
        "action": "skip"
      },
      "readme_md_generated": false,
      "index_files_generated": false
    }
  ],
  "summary": {
    "folders_analyzed": 8,
    "rules_discovered": 78,
    "readme_files_found": 7,
    "readme_files_fresh": 7,
    "readme_files_stale": 0,
    "index_files_found": 5,
    "index_files_fresh": 5,
    "files_generated": 0,
    "action_items": []
  },
  "freshness_analysis": {
    "total_files_checked": 12,
    "status_distribution": {
      "fresh": 12,
      "stale_incremental": 0,
      "stale_full": 0,
      "missing": 0
    },
    "timestamp": "2026-02-12T10:57:22Z",
    "conclusion": "All documentation is current and fresh. No regeneration required. Project has active recent commits (127 in last 5 days) with most activity in data/ and scripts/ folders."
  },
  "recent_activity": {
    "last_5_days": {
      "total_commits": 127,
      "by_folder": {
        "data": 84,
        "scripts": 94,
        ".claude": 38,
        "docs": 36,
        "schemas": 22,
        "config": 6
      },
      "activity_type": "Active development with bug fixes, checkpoints, and feature additions"
    }
  },
  "documentation_quality": {
    "assessment": "Excellent",
    "strengths": [
      "All major folders have comprehensive READMEs with organization rules",
      "Index files maintain up-to-date file inventory",
      "Git analysis sections are accurate and use proper metadata",
      "Naming conventions are clearly documented and consistent",
      "Auto-generated markers present for safe regeneration"
    ],
    "areas_for_improvement": [
      "scripts/ folder could benefit from regenerated INDEX.md",
      "Consider creating sample configurations for troubleshooting"
    ]
  },
  "recommendations": {
    "immediate": [],
    "follow_up": [
      "Monitor data/ folder for timeline validation issues (active area)",
      "Ensure scripts/ folder INDEX.md stays synchronized with new utilities",
      "Validate schema compliance during next planning cycle"
    ]
  }
}
