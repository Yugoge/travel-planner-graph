{
  "request_id": "clean-20260211-082038",
  "timestamp": "2026-02-11T08:20:38Z",
  "inspector": "style-inspector",
  "violations": [
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "32 files across project",
      "finding": "32 files contain unresolved merge conflict markers (<<<<<, =====, >>>>>)",
      "recommendation": "Resolve all merge conflicts. Critical files include: scripts/add-notes-local.py (10 markers), scripts/fix-all-data-issues.py (16 markers), scripts/lib/html_generator.py (2 markers), docs/dev/issue3-delivery-summary.txt (23 markers)"
    },
    {
      "standard": "dangling-references",
      "severity": "critical",
      "location": ".claude/commands/gaode-maps.md:19-32",
      "finding": "References scripts in .claude/commands/gaode-maps/scripts/ which do not exist. Actual scripts are in .claude/skills/gaode-maps/scripts/",
      "recommendation": "Update all script paths from .claude/commands/gaode-maps/scripts/ to .claude/skills/gaode-maps/scripts/"
    },
    {
      "standard": "use-source-venv",
      "severity": "major",
      "location": ".claude/commands/plan.md:1224",
      "finding": "Direct python3 call without venv activation: python3 /root/travel-planner/scripts/plan-validate.py",
      "recommendation": "Add: source venv/bin/activate || source .venv/bin/activate before python3 call"
    },
    {
      "standard": "use-source-venv",
      "severity": "major",
      "location": ".claude/agents/accommodation.md:329",
      "finding": "Direct python3 call: python3 scripts/plan-validate.py <trip-directory> --agent accommodation",
      "recommendation": "Update to: source venv/bin/activate && python scripts/plan-validate.py ..."
    },
    {
      "standard": "use-source-venv",
      "severity": "major",
      "location": ".claude/agents/attractions.md:316",
      "finding": "Direct python3 call: python3 scripts/plan-validate.py <trip-directory> --agent attractions",
      "recommendation": "Update to: source venv/bin/activate && python scripts/plan-validate.py ..."
    },
    {
      "standard": "english-only",
      "severity": "major",
      "location": "scripts/fix-attractions-data.py:75-141",
      "finding": "Contains Chinese text in translation mappings (e.g., '滨江步道', '景观步道', etc.)",
      "recommendation": "Translate Chinese mappings to English or move to external localization file"
    },
    {
      "standard": "english-only",
      "severity": "major",
      "location": "scripts/add-notes-local.py:85-223",
      "finding": "Contains extensive Chinese translations in meals_notes dictionary",
      "recommendation": "Move Chinese translations to external localization file (e.g., locales/zh_CN.json)"
    },
    {
      "standard": "english-only",
      "severity": "major",
      "location": "scripts/fix-all-data-issues.py:399-631",
      "finding": "Contains extensive Chinese translations in translate_notes() function (transportation notes translation mapping)",
      "recommendation": "Move Chinese translations to external localization file (e.g., locales/zh_CN.json)"
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/fix-attractions-data.py:332-333",
      "finding": "Hardcoded data directory paths: /root/travel-planner/data/china-feb-15-mar-7-2026-20260202-195429/attractions.json and /root/travel-planner/data/beijing-exchange-bucket-list-20260202-232405/attractions.json",
      "recommendation": "Accept paths as CLI arguments with defaults: parser.add_argument('--trip1', default='data/china-feb-15-mar-7-2026-20260202-195429/attractions.json')"
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/qa-final-audit.py:16-22",
      "finding": "Hardcoded BASE_DIR='/root/travel-planner' and hardcoded trip directory names",
      "recommendation": "Accept as CLI arguments: --base-dir with default to current project root"
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/add-notes-local.py:13",
      "finding": "Hardcoded DATA_DIR = Path('/root/travel-planner/data/china-feb-15-mar-7-2026-20260202-195429')",
      "recommendation": "Accept as CLI argument: --data-dir with appropriate default"
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/qa-schema-audit.py:18-24",
      "finding": "Hardcoded BASE_DIR='/root/travel-planner', SCHEMA_DIR, TRIP_DIRS with specific directory names",
      "recommendation": "Accept as CLI arguments: --base-dir with default to current project root"
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/fix-all-data-issues.py:24-25",
      "finding": "Hardcoded BUCKET and ITINERARY directory paths derived from project root",
      "recommendation": "These are reasonably parameterized via argv[1] but subdirectory names 'beijing-exchange-bucket-list-20260202-232405' and 'china-feb-15-mar-7-2026-20260202-195429' are hardcoded"
    },
    {
      "standard": "integer-step-numbering",
      "severity": "minor",
      "location": ".claude/commands/plan.md:687",
      "finding": "Uses decimal step numbering: Step 11.5",
      "recommendation": "Resequence to integers: Step 12, Step 13, etc."
    },
    {
      "standard": "integer-step-numbering",
      "severity": "minor",
      "location": ".claude/commands/plan.md:1209",
      "finding": "Uses decimal step numbering: Step 15.5",
      "recommendation": "Resequence to integers: Step 16, Step 17, etc."
    },
    {
      "standard": "integer-step-numbering",
      "severity": "minor",
      "location": ".claude/commands/plan.md:1219",
      "finding": "Uses decimal step numbering: Step 15.6",
      "recommendation": "Resequence to integers: Step 17, Step 18, etc."
    },
    {
      "standard": "concise-documentation",
      "severity": "minor",
      "location": ".claude/commands/plan.md",
      "finding": "Very long command file (1744 lines). Contains extensive inline documentation that could be moved to separate docs",
      "recommendation": "Consider moving detailed workflow explanations to docs/guides/plan-workflow.md and keep command file focused on usage"
    }
  ],
  "summary": {
    "standards_checked": 11,
    "violations_found": 26,
    "critical": 19,
    "major": 10,
    "minor": 4,
    "files_audited": 10,
    "files_total": 10
  }
}
