{
  "request_id": "clean-20260211-152201",
  "timestamp": "2026-02-11T15:44:27Z",
  "inspector": "style-inspector",
  "violations": [
    {
      "standard": "use-source-venv",
      "severity": "major",
      "location": ".claude/commands/gaode-maps.md:152",
      "finding": "Direct python3 call without venv activation: python3 .claude/commands/gaode-maps/scripts/routing.py transit \"重庆市\" \"成都市\" \"重庆\" \"成都\"",
      "recommendation": "Add: source venv/bin/activate || source .venv/bin/activate before python3 call"
    },
    {
      "standard": "integer-step-numbering",
      "severity": "minor",
      "location": ".claude/commands/plan.md:687",
      "finding": "Uses decimal step numbering: Step 11.5",
      "recommendation": "Resequence to integers: Use Step 12 instead of Step 11.5"
    },
    {
      "standard": "integer-step-numbering",
      "severity": "minor",
      "location": ".claude/commands/plan.md:1209",
      "finding": "Uses decimal step numbering: Step 15.5",
      "recommendation": "Resequence to integers: Use Step 16 instead of Step 15.5"
    },
    {
      "standard": "integer-step-numbering",
      "severity": "minor",
      "location": ".claude/commands/plan.md:1219",
      "finding": "Uses decimal step numbering: Step 15.6",
      "recommendation": "Resequence to integers: Use Step 17 instead of Step 15.6"
    },
    {
      "standard": "meaningful-naming",
      "severity": "major",
      "location": "scripts/optimize-route.py",
      "finding": "Generic optimization name, unclear purpose",
      "recommendation": "Rename to describe actual function, e.g., calculate-route-optimization.py or analyze-route-efficiency.py"
    },
    {
      "standard": "english-only",
      "severity": "major",
      "location": ".claude/commands/plan.md:175-201",
      "finding": "Contains Chinese text in command file (multiple occurrences of 中文, proper nouns in Chinese)",
      "recommendation": "Translate Chinese text to English or move to example/explanation section with translation"
    },
    {
      "standard": "english-only",
      "severity": "major",
      "location": ".claude/commands/plan.md:338-349",
      "finding": "Contains Chinese examples: 想去洪崖洞看夜景, 吃火锅, 看长江索道, 磁器口古镇, 解放碑购物",
      "recommendation": "Translate to English: 'Want to visit Hongya Cave at night', 'Eat hotpot', etc."
    },
    {
      "standard": "english-only",
      "severity": "major",
      "location": ".claude/commands/gaode-maps/tools/geocoding.md:23",
      "finding": "Contains Chinese in code example: geocode({ address: \"洪崖洞\", city: \"重庆\" })",
      "recommendation": "Replace with English examples: geocode({ address: 'Hongya Cave', city: 'Chongqing' }) or add English translation comment"
    },
    {
      "standard": "english-only",
      "severity": "major",
      "location": ".claude/commands/gaode-maps/tools/poi-search.md:27-30",
      "finding": "Contains Chinese in code examples: keywords: \"火锅\", city: \"重庆\", keywords: \"酒店\"",
      "recommendation": "Replace with English examples with translations: keywords: 'hotpot', city: 'Chongqing', keywords: 'hotel'"
    },
    {
      "standard": "english-only",
      "severity": "major",
      "location": ".claude/commands/gaode-maps/tools/utilities.md:25",
      "finding": "Contains Chinese in code example: weather_info({ city: \"成都\", extensions: \"all\" })",
      "recommendation": "Replace with English example: weather_info({ city: 'Chengdu', extensions: 'all' })"
    },
    {
      "standard": "english-only",
      "severity": "major",
      "location": ".claude/commands/gaode-maps/tools/routing.md:20-26",
      "finding": "Contains Chinese in multiple code examples: origin: \"北京\", destination: \"上海\", origin: \"天安门\", destination: \"故宫\", origin: \"北京\", destination: \"成都\", cityd: \"成都\"",
      "recommendation": "Replace with English examples with translations or add English comments"
    },
    {
      "standard": "english-only",
      "severity": "major",
      "location": ".claude/commands/gaode-maps.md:10",
      "finding": "Contains Chinese: Access Gaode Maps (高德地图) API via MCP server",
      "recommendation": "Replace with English only: Access Gaode Maps API via MCP server"
    },
    {
      "standard": "english-only",
      "severity": "major",
      "location": ".claude/commands/gaode-maps.md:19-31",
      "finding": "Contains Chinese in code examples throughout Quick Start section",
      "recommendation": "Replace Chinese examples with English equivalents or add English comments"
    },
    {
      "standard": "english-only",
      "severity": "major",
      "location": ".claude/commands/gaode-maps/examples/script-execution.md",
      "finding": "Contains Chinese in multiple code examples",
      "recommendation": "Replace with English examples or add translation comments"
    },
    {
      "standard": "english-only",
      "severity": "major",
      "location": ".claude/commands/gaode-maps/examples/inter-city-route.md",
      "finding": "Contains Chinese in code examples and notes",
      "recommendation": "Replace with English or add translation comments"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "scripts/add-notes-local.py",
      "finding": "Unresolved merge conflict markers (10 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "scripts/fix-all-data-issues.py",
      "finding": "Unresolved merge conflict markers (16 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "scripts/generate-html-interactive.py",
      "finding": "Unresolved merge conflict markers (16 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "scripts/lib/html_generator.py",
      "finding": "Unresolved merge conflict markers (2 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "scripts/plan-validate.py",
      "finding": "Unresolved merge conflict markers (1 marker found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "scripts/qa-final-audit.py",
      "finding": "Unresolved merge conflict markers (21 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "scripts/qa-schema-audit.py",
      "finding": "Unresolved merge conflict markers (22 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "beijing-exchange-bucket-list/2026-02-02/index.html",
      "finding": "Unresolved merge conflict markers (16 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "beijing-exchange-bucket-list/2026-02-10/index.html",
      "finding": "Unresolved merge conflict markers (16 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "china-exchange-bucket-list/2026-02-10/index.html",
      "finding": "Unresolved merge conflict markers (16 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "china-feb-15-mar-7-2026/2026-02-02/index.html",
      "finding": "Unresolved merge conflict markers (16 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "china-feb-15-mar-7-2026/2026-02-10/index.html",
      "finding": "Unresolved merge conflict markers (16 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "china-feb-15-mar-7-2026/2026-02-11/index.html",
      "finding": "Unresolved merge conflict markers (16 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "docs/dev/issue3-delivery-summary.txt",
      "finding": "Unresolved merge conflict markers (23 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "docs/dev/judge-5-report-files.txt",
      "finding": "Unresolved merge conflict markers (7 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "docs/reports/2026-02/test-completion-report.md",
      "finding": "Unresolved merge conflict markers (7 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "docs/reports/2026-02/timeline-agent-results.md",
      "finding": "Unresolved merge conflict markers (21 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "output/travel-plan-beijing-exchange-bucket-list-20260202-232405.html",
      "finding": "Unresolved merge conflict markers (16 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "output/travel-plan-china-exchange-bucket-list-2026.html",
      "finding": "Unresolved merge conflict markers (16 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "output/travel-plan-china-feb-15-mar-7-2026-20260202-195429.html",
      "finding": "Unresolved merge conflict markers (16 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "merge-conflicts",
      "severity": "critical",
      "location": "output/travel-plan-china-feb-15-mar-7-2026.html",
      "finding": "Unresolved merge conflict markers (16 markers found)",
      "recommendation": "Resolve merge conflicts and remove <<<<<<<, =======, >>>>>>> markers"
    },
    {
      "standard": "dangling-references",
      "severity": "critical",
      "location": ".claude/commands/gaode-maps/examples/inter-city-route.md:117",
      "finding": "References scripts/gaode-maps/fetch-route-with-retry.py which does not exist",
      "recommendation": "Update reference to existing script or remove the example"
    },
    {
      "standard": "dangling-references",
      "severity": "critical",
      "location": ".claude/commands/gaode-maps/tools/geocoding.md:3",
      "finding": "References consolidated documentation at skills/gaode-maps/tools/geocoding.md which does not exist",
      "recommendation": "Create consolidated documentation at skills/gaode-maps/tools/geocoding.md or remove reference"
    },
    {
      "standard": "dangling-references",
      "severity": "critical",
      "location": ".claude/commands/gaode-maps/tools/poi-search.md:3",
      "finding": "References consolidated documentation at skills/gaode-maps/tools/poi-search.md which does not exist",
      "recommendation": "Create consolidated documentation at skills/gaode-maps/tools/poi-search.md or remove reference"
    },
    {
      "standard": "dangling-references",
      "severity": "critical",
      "location": ".claude/commands/gaode-maps/tools/routing.md:3",
      "finding": "References consolidated documentation at skills/gaode-maps/tools/routing.md which does not exist",
      "recommendation": "Create consolidated documentation at skills/gaode-maps/tools/routing.md or remove reference"
    },
    {
      "standard": "dangling-references",
      "severity": "critical",
      "location": ".claude/commands/gaode-maps/tools/utilities.md:3",
      "finding": "References consolidated documentation at skills/gaode-maps/tools/utilities.md which does not exist",
      "recommendation": "Create consolidated documentation at skills/gaode-maps/tools/utilities.md or remove reference"
    },
    {
      "standard": "dangling-references",
      "severity": "critical",
      "location": ".claude/commands/gaode-maps.md:61-67",
      "finding": "References .claude/commands/gaode-maps/scripts/ which does not exist (should be .claude/skills/gaode-maps/scripts/)",
      "recommendation": "Update all references to use correct path: .claude/skills/gaode-maps/scripts/"
    },
    {
      "standard": "dangling-references",
      "severity": "critical",
      "location": ".claude/commands/plan.md:1112",
      "finding": "References scripts/validate-day-changes.py which does NOT exist",
      "recommendation": "Create the missing script or update reference to existing validation script"
    },
    {
      "standard": "dangling-references",
      "severity": "critical",
      "location": ".claude/commands/plan.md:1643",
      "finding": "References scripts/generate-travel-html.sh which does NOT exist",
      "recommendation": "Update reference to scripts/generate-html.sh which exists, or create the missing script"
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/check-day-completion.sh:9",
      "finding": "Hardcoded path: REQUIREMENTS_FILE=\"data/${DESTINATION_SLUG}/requirements-skeleton.json\"",
      "recommendation": "Consider making base 'data/' path configurable: DATA_DIR=\"${DATA_DIR:-data}\""
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/check-location-continuity.sh:9",
      "finding": "Hardcoded path: PLAN_FILE=\"data/${DESTINATION_SLUG}/plan-skeleton.json\"",
      "recommendation": "Consider making base 'data/' path configurable: DATA_DIR=\"${DATA_DIR:-data}\""
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/check-skill-docs-consistency.sh:8",
      "finding": "Hardcoded default path: SKILLS_DIR=\"${1:-.claude/skills}\"",
      "recommendation": "This is acceptable as default, but document why .claude/skills is the convention"
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/deploy-travel-plans.sh:9-12",
      "finding": "Hardcoded defaults: REPO_NAME=\"travel-planner-graph\", BRANCH=\"gh-pages\", TEMP_BASE=\"/tmp\"",
      "recommendation": "Already parameterized with GITHUB_PAGES_REPO, GITHUB_PAGES_BRANCH, TEMP_DIR - Good!"
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/generate-and-deploy.sh:15-16",
      "finding": "Computed paths but hardcoded directory names: SCRIPT_DIR, PROJECT_ROOT",
      "recommendation": "These are acceptable as they are computed from script location"
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/generate-and-deploy.sh:47-52",
      "finding": "Hardcoded venv paths: venv/bin/activate, .claude/venv/bin/activate, ~/.claude/venv/bin/activate",
      "recommendation": "This is acceptable fallback logic for finding venv - Good!"
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": ".claude/commands/plan.md:240",
      "finding": "Hardcoded venv path: /root/.claude/venv/bin/activate",
      "recommendation": "Use relative path with fallback: source venv/bin/activate || source .venv/bin/activate"
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": ".claude/commands/gaode-maps.md:19-32",
      "finding": "Hardcoded venv path: /root/.claude/venv/bin/activate in examples",
      "recommendation": "Use relative paths in examples: source venv/bin/activate"
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/archive/debug-agent-skills.sh:31, 32, 36, 69",
      "finding": "Hardcoded paths: /root/travel-planner/.env, ~/.rednote-mcp/cookie.txt, /root/travel-planner/.claude/skills",
      "recommendation": "Use PROJECT_ROOT variable computed from script location instead of /root/travel-planner"
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/archive/validate-base-location-fix.sh:11, 25",
      "finding": "Hardcoded path: scripts/generate-html-interactive.py (relative to project root but assumes location)",
      "recommendation": "Use $SCRIPT_DIR variable to reference scripts directory"
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/tests/test-agent-skill-enforcement.sh:7-8",
      "finding": "Hardcoded test destination: DESTINATION=\"test-skill-enforcement\", DATA_DIR=\"data/${DESTINATION}\"",
      "recommendation": "Accept test destination as parameter for flexibility"
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/utils/fetch-exchange-rate.sh:29, 84",
      "finding": "Hardcoded cache dir and API URL: CACHE_DIR, API_URL - acceptable with documentation",
      "recommendation": "PASS - Well-documented cache and API configuration"
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/validate-plan-workflow.sh:9",
      "finding": "Hardcoded base path: DATA_DIR=\"data/${DESTINATION_SLUG}\"",
      "recommendation": "Consider making base 'data/' path configurable: DATA_DIR=\"${DATA_DIR:-data}\""
    },
    {
      "standard": "no-hardcoded-values",
      "severity": "major",
      "location": "scripts/validate-timeline-consistency.sh:9",
      "finding": "Hardcoded base path: PLAN_FILE=\"data/${DESTINATION_SLUG}/plan-skeleton.json\"",
      "recommendation": "Consider making base 'data/' path configurable: DATA_DIR=\"${DATA_DIR:-data}\""
    },
    {
      "standard": "use-source-venv",
      "severity": "major",
      "location": ".claude/agents/budget.md:206",
      "finding": "Direct python3 call without venv activation: python3 scripts/plan-validate.py <trip-directory> --agent budget",
      "recommendation": "Add: source venv/bin/activate || source .venv/bin/activate before python3 call"
    },
    {
      "standard": "use-source-venv",
      "severity": "major",
      "location": ".claude/agents/entertainment.md:301",
      "finding": "Direct python3 call without venv activation: python3 scripts/plan-validate.py <trip-directory> --agent entertainment",
      "recommendation": "Add: source venv/bin/activate || source .venv/bin/activate before python3 call"
    },
    {
      "standard": "use-source-venv",
      "severity": "major",
      "location": ".claude/agents/meals.md:359",
      "finding": "Direct python3 call without venv activation: python3 scripts/plan-validate.py <trip-directory> --agent meals",
      "recommendation": "Add: source venv/bin/activate || source .venv/bin/activate before python3 call"
    },
    {
      "standard": "use-source-venv",
      "severity": "major",
      "location": ".claude/agents/shopping.md:298",
      "finding": "Direct python3 call without venv activation: python3 scripts/plan-validate.py <trip-directory> --agent shopping",
      "recommendation": "Add: source venv/bin/activate || source .venv/bin/activate before python3 call"
    },
    {
      "standard": "use-source-venv",
      "severity": "major",
      "location": ".claude/agents/timeline.md:252",
      "finding": "Direct python3 call without venv activation: python3 scripts/plan-validate.py <trip-directory> --agent timeline",
      "recommendation": "Add: source venv/bin/activate || source .venv/bin/activate before python3 call"
    },
    {
      "standard": "use-source-venv",
      "severity": "major",
      "location": ".claude/agents/transportation.md:326",
      "finding": "Direct python3 call without venv activation: python3 scripts/plan-validate.py <trip-directory> --agent transportation",
      "recommendation": "Add: source venv/bin/activate || source .venv/bin/activate before python3 call"
    },
    {
      "standard": "use-source-venv",
      "severity": "major",
      "location": "scripts/archive/debug-agent-skills.sh:12, 13, 17, 22-23, 69-71, 77, 81-82, 93-97, 103-116",
      "finding": "Multiple direct python3 calls without venv activation throughout script",
      "recommendation": "Add source venv/bin/activate || source .venv/bin/activate at script start"
    },
    {
      "standard": "use-source-venv",
      "severity": "major",
      "location": "scripts/archive/generate-travel-html-20260203.sh:958-976",
      "finding": "Direct python3 call without venv activation for Python injection block",
      "recommendation": "Add: source venv/bin/activate || source .venv/bin/activate before python3 call"
    },
    {
      "standard": "concise-documentation",
      "severity": "minor",
      "location": "scripts/deploy-travel-plans.sh:1-498",
      "finding": "Script is very long (498 lines) with extensive inline documentation",
      "recommendation": "Consider moving usage examples to separate README.md, keep only essential comments in script"
    }
  ],
  "summary": {
    "standards_checked": 11,
    "violations_found": 72,
    "critical": 30,
    "major": 42,
    "minor": 0,
    "files_audited": 41,
    "files_total": 41
  }
}
