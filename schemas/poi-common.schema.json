{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "poi-common.schema.json",
  "title": "POI Common Definitions",
  "description": "Shared definitions for all travel planner agent outputs. SINGLE canonical format per field type. No format alternatives allowed.",
  "$defs": {
    "bilingual_name": {
      "type": "object",
      "description": "A name in both base (English/romanized) and local (native script) languages.",
      "properties": {
        "name_base": {
          "type": "string",
          "minLength": 1,
          "description": "Name in English or romanized form. REQUIRED non-empty."
        },
        "name_local": {
          "type": "string",
          "description": "Name in local/native script. Empty string if not available."
        }
      },
      "required": ["name_base", "name_local"]
    },

    "bilingual_location": {
      "type": "object",
      "description": "A location/address in both base and local languages.",
      "properties": {
        "location_base": {
          "type": "string",
          "description": "Location/address in English or romanized form."
        },
        "location_local": {
          "type": "string",
          "description": "Location/address in local/native script. Empty string if not available."
        }
      },
      "required": ["location_base", "location_local"]
    },

    "coordinates": {
      "type": "object",
      "description": "Geographic coordinates. CANONICAL FORMAT: {lat, lng}. Do NOT use {latitude, longitude}.",
      "properties": {
        "lat": {
          "type": "number",
          "minimum": -90,
          "maximum": 90,
          "description": "Latitude in decimal degrees."
        },
        "lng": {
          "type": "number",
          "minimum": -180,
          "maximum": 180,
          "description": "Longitude in decimal degrees."
        }
      },
      "required": ["lat", "lng"],
      "additionalProperties": false
    },

    "time_range": {
      "type": "object",
      "description": "A time range with start and end in HH:MM 24-hour format. CANONICAL FORMAT: {start, end} object. Do NOT use plain strings.",
      "properties": {
        "start": {
          "type": "string",
          "pattern": "^[0-2][0-9]:[0-5][0-9]$",
          "description": "Start time in HH:MM format."
        },
        "end": {
          "type": "string",
          "pattern": "^[0-2][0-9]:[0-5][0-9]$",
          "description": "End time in HH:MM format."
        }
      },
      "required": ["start", "end"],
      "additionalProperties": false
    },

    "search_result": {
      "type": "object",
      "description": "A search result. CANONICAL FORMAT: {skill, type, url, display_text}. Do NOT use {source, gaode_id}.",
      "properties": {
        "skill": {
          "type": "string",
          "description": "The search skill/tool that produced this result (e.g., 'gaode-maps', 'google-maps', 'web-search')."
        },
        "type": {
          "type": "string",
          "description": "The type of search result (e.g., 'poi_search', 'poi_detail', 'place_search', 'hotel_info')."
        },
        "url": {
          "type": "string",
          "description": "URL to the search result."
        },
        "display_text": {
          "type": "string",
          "description": "Human-readable display text for the link."
        }
      },
      "required": ["skill", "type", "url", "display_text"],
      "additionalProperties": false
    },

    "cost_field": {
      "type": "number",
      "minimum": 0,
      "description": "A monetary cost value, always >= 0."
    },

    "currency_code": {
      "type": "string",
      "pattern": "^[A-Z]{3}$",
      "description": "ISO 4217 currency code (e.g., USD, CNY, EUR). REQUIRED on every entry with a cost."
    },

    "day_header": {
      "type": "object",
      "description": "Standard day-level metadata required on every day entry in every agent file.",
      "properties": {
        "day": {
          "type": "integer",
          "minimum": 1,
          "description": "Day number in the trip (1-indexed)."
        },
        "date": {
          "type": "string",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
          "description": "Date in YYYY-MM-DD format."
        },
        "location": {
          "type": "string",
          "description": "City or location for this day."
        }
      },
      "required": ["day", "date"]
    },

    "agent_envelope": {
      "type": "object",
      "description": "The standard wrapper for all agent outputs.",
      "properties": {
        "agent": {
          "type": "string",
          "description": "The name of the agent that produced this output."
        },
        "status": {
          "type": "string",
          "enum": ["complete"],
          "description": "Processing status. Currently only 'complete' is valid."
        },
        "data": {
          "type": "object",
          "description": "The agent-specific data payload."
        },
        "notes": {
          "type": "string",
          "description": "Optional free-form notes from the agent about the data."
        }
      },
      "required": ["agent", "status", "data"],
      "additionalProperties": true
    },

    "image_url": {
      "type": "string",
      "format": "uri",
      "description": "Optional URL to an image for this POI (restaurant, attraction, etc.)"
    }
  }
}
