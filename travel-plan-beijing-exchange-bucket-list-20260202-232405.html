<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beijing Exchange Semester Bucket List - Multiple city trips</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      overflow-x: hidden;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    // Embedded PLAN_DATA
    const PLAN_DATA = {
  "trip_summary": {
    "trip_type": "Bucket List",
    "description": "Beijing Exchange Semester Bucket List - Multiple city trips",
    "base_location": "Beijing",
    "period": "0 days",
    "travelers": "1 adult (solo travel)",
    "budget_per_trip": "â‚¬500",
    "preferences": "mid-to-high range hotels, city exploration, unique natural landscapes, flexible based on itinerary length"
  },
  "trips": [
    {
      "name": "Harbin",
      "days_label": "2 days",
      "cover": "https://images.unsplash.com/photo-1548199973-03cce0bbc87b?w=1200&h=400&fit=crop",
      "days": [
        {
          "day": 1,
          "date": "Day 1",
          "location": "Harbin",
          "cover": "https://images.unsplash.com/photo-1548199973-03cce0bbc87b?w=1200&h=400&fit=crop",
          "user_plans": [
            "ä¸­å¤®å¤§è¡— (Zhongyang Street) - ä¿„å¼å»ºç­‘",
            "åœ£ç´¢è²äºšå¤§æ•™å ‚ (Saint Sophia Cathedral)",
            "æ¾èŠ±æ±Ÿå†°é›ªå¤§ä¸–ç•Œ (Ice and Snow World)"
          ],
          "meals": {
            "breakfast": {
              "name": "è€é¼ä¸° / Lao Ding Feng (Zhongyang Street)",
              "name_en": "",
              "cost": 35,
              "cuisine": "Traditional Harbin breakfast & pastries",
              "signature_dishes": "Traditional pastries, dumplings, soy milk",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "16:30",
                "end": "17:30"
              },
              "links": {}
            },
            "lunch": {
              "name": "ç´¢è²å¨…ä¿„å¼è¥¿é¤å… / Sofiya Russian Restaurant (Zhongyang Street)",
              "name_en": "",
              "cost": 120,
              "cuisine": "Russian cuisine",
              "signature_dishes": "Borscht, beef stroganoff, Russian dumplings, red sausage",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "12:00",
                "end": "13:30"
              },
              "links": {}
            },
            "dinner": {
              "name": "è€æ¾æ»¨ä¸œåŒ—èœé¦† / Lao Song Bin Northeast Cuisine (Harbin Sunac Mall)",
              "name_en": "",
              "cost": 150,
              "cuisine": "Dongbei (Northeast Chinese) cuisine",
              "signature_dishes": "Guo bao rou (sweet & sour pork), stewed pork with vermicelli, grilled lamb skewers",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "18:30",
                "end": "20:00"
              },
              "links": {}
            }
          },
          "attractions": [
            {
              "name": "ä¸­å¤®å¤§è¡— / Zhongyang Street",
              "name_en": "",
              "location": "Daoli District, Harbin / å“ˆå°”æ»¨å¸‚é“é‡ŒåŒº",
              "type": "Historic Street / Pedestrian Area",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "24 hours (pedestrian street)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "17:30",
                "end": "19:30"
              },
              "links": {}
            },
            {
              "name": "åœ£Â·ç´¢è²äºšæ•™å ‚ / Saint Sophia Cathedral",
              "name_en": "",
              "location": "Daoli District, Harbin / å“ˆå°”æ»¨å¸‚é“é‡ŒåŒºé€ç¬¼è¡—88å·",
              "type": "Church / Museum / Historic Building",
              "cost": 3,
              "cost_eur": 0,
              "opening_hours": "08:30-21:00 (last entry 20:45)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "19:45",
                "end": "21:15"
              },
              "links": {}
            },
            {
              "name": "å“ˆå°”æ»¨å†°é›ªå¤§ä¸–ç•Œ / Harbin Ice and Snow World",
              "name_en": "",
              "location": "Sun Island, Harbin / å“ˆå°”æ»¨å¸‚å¤ªé˜³å¤§é“1458å·",
              "type": "Winter Theme Park / Ice Sculpture Park",
              "cost": 45,
              "cost_eur": 0,
              "opening_hours": "10:00-21:30 (ticket sales stop at 20:30, entry stops at 21:00)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "10:00",
                "end": "12:00"
              },
              "links": {}
            }
          ],
          "entertainment": [
            {
              "name": "Harbin Ice and Snow World - Night Viewing",
              "name_en": "",
              "type": "Attraction - Night Viewing",
              "cost": 240,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "16:30",
              "links": {}
            },
            {
              "name": "Zhongyang Street Night Walk",
              "name_en": "",
              "type": "Street Entertainment",
              "cost": 0,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "19:00",
              "links": {}
            }
          ],
          "accommodation": {
            "name": "Harbin Wei Ye Hotel",
            "name_cn": "",
            "type": "Hotel",
            "location": "32 Jihong Street, Daoli District, Harbin, Heilongjiang Province",
            "cost": 350,
            "stars": 3,
            "time": {
              "start": "15:00",
              "end": "16:00"
            },
            "links": {},
            "image": "https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=300&fit=crop"
          },
          "transportation": {
            "from": "Beijing",
            "to": "Harbin",
            "departure_point": "",
            "arrival_point": "",
            "departure_time": "Early morning (recommend 08:00-09:00)",
            "arrival_time": "Approximately 6-7 hours later",
            "transport_type": "High-speed Train",
            "icon": "ğŸš„",
            "route_number": "VERIFIED",
            "airline": "",
            "cost": 350,
            "booking_status": "VERIFIED",
            "booking_urgency": "",
            "notes": "G105 high-speed train is the fastest option. Book 2-3 weeks in advance for best prices. Alternative: T47 overnight train (13 hours, cheaper at ~250 CNY but arrives early morning). Metro Line 3 from Harbin West to city center (~20 min).",
            "time": {
              "start": "Early morning (recommend 08:00-09:00)",
              "end": "Approximately 6-7 hours later"
            }
          },
          "budget": {
            "meals": 305,
            "attractions": 48,
            "entertainment": 240,
            "accommodation": 350,
            "total": 943
          }
        },
        {
          "day": 2,
          "date": "Day 2",
          "location": "Harbin",
          "cover": "https://images.unsplash.com/photo-1548199973-03cce0bbc87b?w=1200&h=400&fit=crop",
          "user_plans": [
            "å¤ªé˜³å²›å…¬å›­ (Sun Island Park)",
            "ä¸œåŒ—è™æ—å›­ (Siberian Tiger Park)",
            "å“å°ä¸œåŒ—èœ"
          ],
          "meals": {
            "breakfast": {
              "name": "å¸æ¸…çƒ˜ç„™ / Siqing Bakery (Zhongyang Street)",
              "name_en": "",
              "cost": 40,
              "cuisine": "Bakery & cafe",
              "signature_dishes": "Fresh pastries, coffee, breakfast sandwiches",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "08:00",
                "end": "09:00"
              },
              "links": {}
            },
            "lunch": {
              "name": "å…­æ³°å±…Â·å°”æ»¨åœ°æ ‡Â·ä¸œåŒ—èœ / Liu Tai Ju Northeast Cuisine (Aibian Store)",
              "name_en": "",
              "cost": 130,
              "cuisine": "Dongbei cuisine",
              "signature_dishes": "Harbin specialties, dumplings, smoked meats",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "12:00",
                "end": "13:30"
              },
              "links": {}
            },
            "dinner": {
              "name": "æ²¿æ±Ÿé¥ºå­ä¸œåŒ—èœ / Yan Jiang Dumplings & Northeast Cuisine (Zhongyang Street)",
              "name_en": "",
              "cost": 100,
              "cuisine": "Dumplings & Northeast cuisine",
              "signature_dishes": "Hand-made dumplings, stews, cold dishes",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "18:30",
                "end": "20:00"
              },
              "links": {}
            }
          },
          "attractions": [
            {
              "name": "å¤ªé˜³å²›é£æ™¯åŒº / Sun Island Park",
              "name_en": "",
              "location": "Sun Island, Harbin / å“ˆå°”æ»¨å¸‚å¤ªé˜³å¤§é“3å·",
              "type": "Scenic Area / Park / Wetland",
              "cost": 5,
              "cost_eur": 0,
              "opening_hours": "09:00-17:00 (last entry 16:30)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "09:30",
                "end": "12:30"
              },
              "links": {}
            },
            {
              "name": "ä¸œåŒ—è™æ—å›­ / Siberian Tiger Park",
              "name_en": "",
              "location": "Sun Island, Harbin / å“ˆå°”æ»¨å¸‚æ¾åŒ—è¡—88å·",
              "type": "Wildlife Park / Tiger Sanctuary",
              "cost": 12,
              "cost_eur": 0,
              "opening_hours": "08:30-16:00",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "15:00",
                "end": "17:30"
              },
              "links": {}
            }
          ],
          "entertainment": [
            {
              "name": "Ice Bar Experience",
              "name_en": "",
              "type": "Bar - Unique Experience",
              "cost": 30,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": {
                "start": "20:00",
                "end": "21:00"
              },
              "links": {}
            },
            {
              "name": "Pacer's Bar (Optional)",
              "name_en": "",
              "type": "Bar - Live Entertainment",
              "cost": 80,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "21:00",
              "links": {}
            }
          ],
          "accommodation": {
            "name": "Harbin Wei Ye Hotel",
            "name_cn": "",
            "type": "Hotel",
            "location": "32 Jihong Street, Daoli District, Harbin, Heilongjiang Province",
            "cost": 350,
            "stars": 3,
            "time": {
              "start": "15:00",
              "end": "16:00"
            },
            "links": {},
            "image": "https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=300&fit=crop"
          },
          "transportation": null,
          "budget": {
            "meals": 270,
            "attractions": 17,
            "entertainment": 110,
            "accommodation": 350,
            "total": 747
          }
        }
      ]
    },
    {
      "name": "Tianjin",
      "days_label": "1 day",
      "cover": "https://images.unsplash.com/photo-1609766856923-7e0a23024e9c?w=1200&h=400&fit=crop",
      "days": [
        {
          "day": 3,
          "date": "Day 3",
          "location": "Tianjin",
          "cover": "https://images.unsplash.com/photo-1609766856923-7e0a23024e9c?w=1200&h=400&fit=crop",
          "user_plans": [
            "æ„å¼é£æƒ…è¡— (Italian Style Street)",
            "å¤©æ´¥ä¹‹çœ¼ (Tianjin Eye)",
            "å¤æ–‡åŒ–è¡— (Ancient Culture Street)",
            "äº”å¤§é“ (Five Great Avenues) å»ºç­‘æ¼«æ­¥"
          ],
          "meals": {
            "breakfast": {
              "name": "è¿å…´æˆ / Lian Xing Cheng (Binjiang Road)",
              "name_en": "",
              "cost": 45,
              "cuisine": "Traditional Tianjin breakfast",
              "signature_dishes": "Jianbing guozi (savory crepes), douhua (tofu pudding), fried dough sticks",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "14:45",
                "end": "15:30"
              },
              "links": {}
            },
            "lunch": {
              "name": "é’å¹´é¤å… / Qingnian Restaurant (Jinwan Plaza)",
              "name_en": "",
              "cost": 150,
              "cuisine": "Tianjin cuisine",
              "signature_dishes": "Tianjin specialties, seafood, traditional dishes",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "12:00",
                "end": "13:30"
              },
              "links": {}
            },
            "dinner": {
              "name": "ç‹—ä¸ç† / Goubuli (Italian Style Street)",
              "name_en": "",
              "cost": 180,
              "cuisine": "Tianjin traditional cuisine",
              "signature_dishes": "Goubuli baozi (steamed buns), traditional Tianjin dishes",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "18:30",
                "end": "20:00"
              },
              "links": {}
            }
          },
          "attractions": [
            {
              "name": "æ„å¼é£æƒ…è¡— / Italian Style Street",
              "name_en": "",
              "location": "Hebei District, Tianjin / å¤©æ´¥å¸‚æ²³åŒ—åŒºè¿›æ­¥é“34å·",
              "type": "Historic District / Pedestrian Area",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "24 hours (public area)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "15:45",
                "end": "17:15"
              },
              "links": {}
            },
            {
              "name": "å¤©æ´¥ä¹‹çœ¼ / Tianjin Eye",
              "name_en": "",
              "location": "Hebei District, Tianjin / å¤©æ´¥å¸‚ä¸‰å²”æ²³å£æ°¸ä¹æ¡¥ä¸Š",
              "type": "Ferris Wheel / Observation",
              "cost": 10,
              "cost_eur": 0,
              "opening_hours": "Monday 18:00-21:30, Tuesday-Sunday 09:30-21:30",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "17:30",
                "end": "18:15"
              },
              "links": {}
            },
            {
              "name": "å¤æ–‡åŒ–è¡— / Ancient Culture Street",
              "name_en": "",
              "location": "Nankai District, Tianjin / å¤©æ´¥å¸‚å—å¼€åŒºå¤æ–‡åŒ–è¡—",
              "type": "Historic Pedestrian Street / Shopping",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "08:00-22:00 (approximately, shops vary)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "20:15",
                "end": "22:15"
              },
              "links": {}
            },
            {
              "name": "äº”å¤§é“ / Five Great Avenues",
              "name_en": "",
              "location": "Heping District, Tianjin / å¤©æ´¥å¸‚å’Œå¹³åŒºé‡åº†é“83å·",
              "type": "Historic Architecture District / Walking Tour",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "24 hours (public streets)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "10:00",
                "end": "12:00"
              },
              "links": {}
            }
          ],
          "entertainment": [
            {
              "name": "Tianjin Eye Ferris Wheel - Night Ride",
              "name_en": "",
              "type": "Attraction - Night View",
              "cost": 70,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "19:30",
              "links": {}
            },
            {
              "name": "Hai River Night Cruise (Optional)",
              "name_en": "",
              "type": "River Cruise",
              "cost": 100,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "20:30",
              "links": {}
            }
          ],
          "accommodation": {
            "name": "Kind Hotel Tianjin",
            "name_cn": "",
            "type": "Hotel",
            "location": "15 Ziyou Avenue, Italian Style Street, Hebei District, Tianjin",
            "cost": 450,
            "stars": 3,
            "time": {
              "start": "15:00",
              "end": "16:00"
            },
            "links": {},
            "image": "https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=300&fit=crop"
          },
          "transportation": {
            "from": "Harbin",
            "to": "Tianjin",
            "departure_point": "",
            "arrival_point": "",
            "departure_time": "Morning departure recommended (08:00-10:00)",
            "arrival_time": "5-6 hours later",
            "transport_type": "High-speed Train",
            "icon": "ğŸš„",
            "route_number": "VERIFIED",
            "airline": "",
            "cost": 450,
            "booking_status": "VERIFIED",
            "booking_urgency": "",
            "notes": "G2644 high-speed train recommended. Metro Line 6 from Tianjin West to city center (Tianjin Binjiang). Alternative slower train Z238 available (12+ hours, ~280 CNY). Arrive by afternoon to explore Tianjin Eye and Italian Style Street.",
            "time": {
              "start": "Morning departure recommended (08:00-10:00)",
              "end": "5-6 hours later"
            }
          },
          "budget": {
            "meals": 375,
            "attractions": 10,
            "entertainment": 170,
            "accommodation": 450,
            "total": 1005
          }
        }
      ]
    },
    {
      "name": "Xi'an",
      "days_label": "2 days",
      "cover": "https://images.unsplash.com/photo-1583259916581-e2cc0d0e0d66?w=1200&h=400&fit=crop",
      "days": [
        {
          "day": 4,
          "date": "Day 4",
          "location": "Xi'an",
          "cover": "https://images.unsplash.com/photo-1583259916581-e2cc0d0e0d66?w=1200&h=400&fit=crop",
          "user_plans": [
            "å…µé©¬ä¿‘ (Terracotta Warriors) - å¿…çœ‹",
            "åæ¸…å®« (Huaqing Palace)",
            "å›æ°‘è¡— (Muslim Quarter) æ™šé¤ - ç¾Šè‚‰æ³¡é¦",
            "é’Ÿé¼“æ¥¼å¤œæ™¯"
          ],
          "meals": {
            "breakfast": {
              "name": "é‚¢è€ä¸‰è‚‰ä¸¸èƒ¡è¾£æ±¤ / Xing Laosan Meatball Hu La Tang (Bell Tower)",
              "name_en": "",
              "cost": 25,
              "cuisine": "Traditional Xi'an breakfast",
              "signature_dishes": "Hu la tang (spicy soup with meatballs), youtiao (fried dough sticks)",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "08:00",
                "end": "09:00"
              },
              "links": {}
            },
            "lunch": {
              "name": "é•¿å®‰å¤§ç‰Œæ¡£ / Chang'an Dapaidang (North Street)",
              "name_en": "",
              "cost": 120,
              "cuisine": "Shaanxi cuisine",
              "signature_dishes": "Biangbiang noodles, roujiamo (Chinese burger), variety of Shaanxi dishes",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "12:00",
                "end": "13:30"
              },
              "links": {}
            },
            "dinner": {
              "name": "è¥¿å®‰è´¾ä¸‰çŒæ±¤åŒ…Â·å›åŠå°åƒ / Jia San Soup Dumplings (Muslim Quarter)",
              "name_en": "",
              "cost": 80,
              "cuisine": "Muslim Quarter specialties",
              "signature_dishes": "Guantang bao (soup dumplings), yangrou paomo (lamb soup with bread)",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "18:30",
                "end": "20:00"
              },
              "links": {}
            }
          },
          "attractions": [
            {
              "name": "ç§¦å§‹çš‡å…µé©¬ä¿‘åšç‰©é¦† / Terracotta Warriors",
              "name_en": "",
              "location": "Lintong District, Xi'an / è¥¿å®‰å¸‚ä¸´æ½¼åŒºç§¦é™µåŒ—è·¯",
              "type": "Museum / Archaeological Site / Unesco World Heritage",
              "cost": 17,
              "cost_eur": 0,
              "opening_hours": "08:30-18:00 (varies by season)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "15:30",
                "end": "18:30"
              },
              "links": {}
            },
            {
              "name": "åæ¸…å®« / Huaqing Palace",
              "name_en": "",
              "location": "Lintong District, Xi'an / è¥¿å®‰å¸‚ä¸´æ½¼åŒºåæ¸…è·¯38å·",
              "type": "Imperial Palace / Hot Springs / Historic Site",
              "cost": 17,
              "cost_eur": 0,
              "opening_hours": "07:00-19:00 (varies by season)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "10:00",
                "end": "12:00"
              },
              "links": {}
            },
            {
              "name": "å›æ°‘è¡— / Muslim Quarter",
              "name_en": "",
              "location": "Lianhu District, Xi'an / è¥¿å®‰å¸‚è²æ¹–åŒºåŒ—é™¢é—¨",
              "type": "Food Street / Historic Quarter",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "24 hours (most vendors operate 10:00-23:00)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "12:30",
                "end": "14:30"
              },
              "links": {}
            },
            {
              "name": "é’Ÿé¼“æ¥¼ / Bell and Drum Towers",
              "name_en": "",
              "location": "Beilin District, Xi'an / è¥¿å®‰å¸‚è²æ¹–åŒºè¥¿å¤§è¡—åŒ—é™¢é—¨",
              "type": "Historic Towers / Cultural Landmark",
              "cost": 7,
              "cost_eur": 0,
              "opening_hours": "08:00-22:00 (approximately)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "21:30",
                "end": "22:30"
              },
              "links": {}
            }
          ],
          "entertainment": [
            {
              "name": "Bell and Drum Tower Night Illumination",
              "name_en": "",
              "type": "Landmark - Night Viewing",
              "cost": 0,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "19:30",
              "links": {}
            },
            {
              "name": "Defu Lane Bar Street (Optional)",
              "name_en": "",
              "type": "Bar Street",
              "cost": 50,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "21:00",
              "links": {}
            }
          ],
          "accommodation": {
            "name": "Moxy Xi'an Downtown",
            "name_cn": "",
            "type": "Hotel",
            "location": "282 Xiyi Road, Xincheng District, Xi'an, Shaanxi Province",
            "cost": 420,
            "stars": 3,
            "time": {
              "start": "15:00",
              "end": "16:00"
            },
            "links": {},
            "image": "https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=300&fit=crop"
          },
          "transportation": {
            "from": "Tianjin",
            "to": "Xi'an",
            "departure_point": "",
            "arrival_point": "",
            "departure_time": "Early morning (07:00-08:00)",
            "arrival_time": "4-5 hours later",
            "transport_type": "High-speed Train",
            "icon": "ğŸš„",
            "route_number": "VERIFIED",
            "airline": "",
            "cost": 520,
            "booking_status": "VERIFIED",
            "booking_urgency": "",
            "notes": "G1293 high-speed train is fastest (under 5 hours). Metro Line 4 from Xi'an North to city center. Overnight train T58 available (14+ hours, ~320 CNY) but less recommended due to time constraints. Arrive by noon to visit Terracotta Warriors in afternoon.",
            "time": {
              "start": "Early morning (07:00-08:00)",
              "end": "4-5 hours later"
            }
          },
          "budget": {
            "meals": 225,
            "attractions": 41,
            "entertainment": 50,
            "accommodation": 420,
            "total": 736
          }
        },
        {
          "day": 5,
          "date": "Day 5",
          "location": "Xi'an",
          "cover": "https://images.unsplash.com/photo-1583259916581-e2cc0d0e0d66?w=1200&h=400&fit=crop",
          "user_plans": [
            "å¤åŸå¢™éª‘è¡Œ (City Wall cycling)",
            "å¤§é›å¡” (Giant Wild Goose Pagoda)",
            "é™•è¥¿å†å²åšç‰©é¦† (Shaanxi History Museum)",
            "å¤§å”ä¸å¤œåŸ (Tang Dynasty Ever-Bright City) å¤œæ™¯"
          ],
          "meals": {
            "breakfast": {
              "name": "å¾·å‘é•¿é¥ºå­Â·éé— / Defachang Dumplings (Bell Tower)",
              "name_en": "",
              "cost": 60,
              "cuisine": "Traditional dumplings",
              "signature_dishes": "Variety dumpling feast, traditional northern dumplings",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "08:00",
                "end": "09:00"
              },
              "links": {}
            },
            "lunch": {
              "name": "ä»“é¢‰é™¢å­Â·ä¼ ç»Ÿé™•èœ / Cangjie Courtyard Traditional Shaanxi Cuisine (Bell Tower)",
              "name_en": "",
              "cost": 140,
              "cuisine": "Shaanxi cuisine",
              "signature_dishes": "Traditional Shaanxi dishes, noodles, lamb specialties",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "12:00",
                "end": "13:30"
              },
              "links": {}
            },
            "dinner": {
              "name": "è€åˆ˜å®¶æ³¡é¦Â·é™•è¥¿è€å­—å· / Lao Liu Jia Paomo (Bell Tower)",
              "name_en": "",
              "cost": 70,
              "cuisine": "Shaanxi traditional",
              "signature_dishes": "Yangrou paomo (lamb soup with bread), beef paomo",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "18:30",
                "end": "20:00"
              },
              "links": {}
            }
          },
          "attractions": [
            {
              "name": "è¥¿å®‰åŸå¢™ / Xi'an City Wall",
              "name_en": "",
              "location": "Multiple gates, Xi'an / è¥¿å®‰å¸‚å—å¤§è¡—2å·",
              "type": "Historic City Wall / Fortification",
              "cost": 8,
              "cost_eur": 0,
              "opening_hours": "08:00-22:00 (varies by season and gate)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "09:30",
                "end": "12:30"
              },
              "links": {}
            },
            {
              "name": "å¤§é›å¡” / Giant Wild Goose Pagoda",
              "name_en": "",
              "location": "Yanta District, Xi'an / è¥¿å®‰å¸‚é›å¡”åŒºæ…ˆæ©è·¯1å·å¤§æ…ˆæ©å¯ºå†…",
              "type": "Buddhist Pagoda / Temple / Unesco World Heritage",
              "cost": 7,
              "cost_eur": 0,
              "opening_hours": "08:00-18:30 (varies by season)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "15:00",
                "end": "17:00"
              },
              "links": {}
            },
            {
              "name": "é™•è¥¿å†å²åšç‰©é¦† / Shaanxi History Museum",
              "name_en": "",
              "location": "Yanta District, Xi'an / è¥¿å®‰å¸‚é›å¡”åŒºå°å¯¨ä¸œè·¯91å·",
              "type": "History Museum",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "Tuesday-Sunday 09:00-17:30 (last entry 16:00), closed Mondays",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "17:15",
                "end": "20:15"
              },
              "links": {}
            },
            {
              "name": "å¤§å”ä¸å¤œåŸ / Tang Dynasty Ever-Bright City",
              "name_en": "",
              "location": "Yanta District, Xi'an / è¥¿å®‰å¸‚é›å¡”åŒºé›å¡”å—è·¯428å·",
              "type": "Pedestrian Street / Cultural Theme Park",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "24 hours (illuminations from dusk, main activities 19:00-22:00)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "21:45",
                "end": "23:45"
              },
              "links": {}
            }
          ],
          "entertainment": [
            {
              "name": "Tang Dynasty Ever-Bright City Night Walk",
              "name_en": "",
              "type": "Street Entertainment - Night Illumination",
              "cost": 0,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "19:00",
              "links": {}
            },
            {
              "name": "Tang Dynasty Show with Dumpling Banquet",
              "name_en": "",
              "type": "Cultural Performance",
              "cost": 398,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "18:00",
              "links": {}
            }
          ],
          "accommodation": {
            "name": "Moxy Xi'an Downtown",
            "name_cn": "",
            "type": "Hotel",
            "location": "282 Xiyi Road, Xincheng District, Xi'an, Shaanxi Province",
            "cost": 420,
            "stars": 3,
            "time": {
              "start": "15:00",
              "end": "16:00"
            },
            "links": {},
            "image": "https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=300&fit=crop"
          },
          "transportation": null,
          "budget": {
            "meals": 270,
            "attractions": 15,
            "entertainment": 398,
            "accommodation": 420,
            "total": 1103
          }
        }
      ]
    },
    {
      "name": "Suzhou",
      "days_label": "1 day",
      "cover": "https://images.unsplash.com/photo-1609766856923-7e0a23024e9c?w=1200&h=400&fit=crop",
      "days": [
        {
          "day": 6,
          "date": "Day 6",
          "location": "Suzhou",
          "cover": "https://images.unsplash.com/photo-1609766856923-7e0a23024e9c?w=1200&h=400&fit=crop",
          "user_plans": [
            "æ‹™æ”¿å›­ (Humble Administrator's Garden) - UNESCO",
            "è‹å·åšç‰©é¦† (Suzhou Museum - è´è¿é“­è®¾è®¡)",
            "å¹³æ±Ÿè·¯å¤è¡— (Pingjiang Road) æ¼«æ­¥",
            "å±±å¡˜è¡— (Shantang Street) æ™šé¤"
          ],
          "meals": {
            "breakfast": {
              "name": "åŒå¾—å…´Â·è‹å¼é¢é¦†Â·ä¸‰è™¾é¢ / Tongdexing Suzhou Noodles (Pingjiang Road)",
              "name_en": "",
              "cost": 45,
              "cuisine": "Suzhou noodles",
              "signature_dishes": "Sanxia noodles (three shrimp noodles), red oil wonton soup",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "08:00",
                "end": "09:00"
              },
              "links": {}
            },
            "lunch": {
              "name": "é‡‘æµ·åÂ·å¹³æ±Ÿé¢‚ / Jin Haihua Pingjiang Song",
              "name_en": "",
              "cost": 150,
              "cuisine": "Suzhou cuisine",
              "signature_dishes": "Squirrel-shaped mandarin fish, sweet & sour spare ribs, river shrimp",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "19:30",
                "end": "21:00"
              },
              "links": {}
            },
            "dinner": {
              "name": "æ¾é¹¤æ¥¼ / Songhelou (Pingjiang Road)",
              "name_en": "",
              "cost": 200,
              "cuisine": "Suzhou traditional cuisine",
              "signature_dishes": "Squirrel-shaped mandarin fish, Suzhou-style braised pork, seasonal river delicacies",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "18:30",
                "end": "20:00"
              },
              "links": {}
            }
          },
          "attractions": [
            {
              "name": "æ‹™æ”¿å›­ / Humble Administrator's Garden",
              "name_en": "",
              "location": "Gusu District, Suzhou / è‹å·å¸‚å§‘è‹åŒºä¸œåŒ—è¡—178å·",
              "type": "Classical Chinese Garden / Unesco World Heritage",
              "cost": 12,
              "cost_eur": 0,
              "opening_hours": "07:30-17:30 (varies by season)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "16:45",
                "end": "19:15"
              },
              "links": {}
            },
            {
              "name": "è‹å·åšç‰©é¦† / Suzhou Museum",
              "name_en": "",
              "location": "Gusu District, Suzhou / è‹å·å¸‚å§‘è‹åŒºä¸œåŒ—è¡—204å·",
              "type": "Art And History Museum",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "Tuesday-Sunday 09:00-17:00 (last entry 16:00), closed Mondays",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "10:00",
                "end": "12:00"
              },
              "links": {}
            },
            {
              "name": "å¹³æ±Ÿè·¯å¤è¡— / Pingjiang Road Historic Street",
              "name_en": "",
              "location": "Gusu District, Suzhou / è‹å·å¸‚å§‘è‹åŒºå¹³æ±Ÿè·¯",
              "type": "Historic Canal Street / Shopping",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "24 hours (shops typically 10:00-22:00)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "21:00",
                "end": "23:00"
              },
              "links": {}
            },
            {
              "name": "å±±å¡˜è¡— / Shantang Street",
              "name_en": "",
              "location": "Gusu District, Suzhou / è‹å·å¸‚å§‘è‹åŒºå±±å¡˜è¡—",
              "type": "Historic Canal Street / Nightlife",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "24 hours (shops typically 10:00-22:00)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "12:30",
                "end": "14:30"
              },
              "links": {}
            }
          ],
          "entertainment": [
            {
              "name": "Shantang Street Night Walk",
              "name_en": "",
              "type": "Street Entertainment - Night Illumination",
              "cost": 0,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "19:00",
              "links": {}
            },
            {
              "name": "Kunqu Opera Performance (Optional)",
              "name_en": "",
              "type": "Traditional Opera",
              "cost": 135,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "19:45",
              "links": {}
            }
          ],
          "accommodation": {
            "name": "Scholars Hotel PingJiangFu Suzhou",
            "name_cn": "",
            "type": "Boutique Hotel",
            "location": "60 Baita East Road, Gusu District, Suzhou, Jiangsu Province",
            "cost": 480,
            "stars": 3,
            "time": {
              "start": "15:00",
              "end": "16:00"
            },
            "links": {},
            "image": "https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=300&fit=crop"
          },
          "transportation": {
            "from": "Xi'an",
            "to": "Suzhou",
            "departure_point": "",
            "arrival_point": "",
            "departure_time": "Morning (07:00-09:00)",
            "arrival_time": "6-7 hours later",
            "transport_type": "High-speed Train",
            "icon": "ğŸš„",
            "route_number": "VERIFIED",
            "airline": "",
            "cost": 580,
            "booking_status": "VERIFIED",
            "booking_urgency": "",
            "notes": "G4876 high-speed train recommended. Metro Line 2 from Suzhou North to city center (take to Guangji South Rd). Overnight train Z306 available (15+ hours, ~400 CNY). Arrive by afternoon to explore Humble Administrator's Garden before closing time.",
            "time": {
              "start": "Morning (07:00-09:00)",
              "end": "6-7 hours later"
            }
          },
          "budget": {
            "meals": 395,
            "attractions": 12,
            "entertainment": 135,
            "accommodation": 480,
            "total": 1022
          }
        }
      ]
    },
    {
      "name": "Hangzhou",
      "days_label": "1 day",
      "cover": "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1200&h=400&fit=crop",
      "days": [
        {
          "day": 7,
          "date": "Day 7",
          "location": "Hangzhou",
          "cover": "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1200&h=400&fit=crop",
          "user_plans": [
            "è¥¿æ¹– (West Lake) - UNESCO æ¸¸èˆ¹+æ¼«æ­¥",
            "çµéšå¯º (Lingyin Temple)",
            "é¾™äº•æ‘ (Longjing Tea Village) å“èŒ¶",
            "è¥¿æºªæ¹¿åœ° (Xixi Wetland) æˆ– æ²³åŠè¡— (Hefang Street)"
          ],
          "meals": {
            "breakfast": {
              "name": "çŸ¥å‘³è§‚ / Zhiweiguan (Baochu Road Dimsum Branch)",
              "name_en": "",
              "cost": 50,
              "cuisine": "Hangzhou traditional breakfast",
              "signature_dishes": "Xiaolongbao (soup dumplings), shaomai, scallion pancakes",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "10:30",
                "end": "11:30"
              },
              "links": {}
            },
            "lunch": {
              "name": "æ¥¼å¤–æ¥¼ / Lou Wai Lou (West Lake Scenic Area)",
              "name_en": "",
              "cost": 250,
              "cuisine": "Hangzhou traditional cuisine",
              "signature_dishes": "West Lake vinegar fish, Dongpo pork, Beggar's chicken, Longjing shrimp",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "16:00",
                "end": "17:30"
              },
              "links": {}
            },
            "dinner": {
              "name": "å¤–å©†å®¶ / Grandma's Home (West Lake Broken Bridge)",
              "name_en": "",
              "cost": 120,
              "cuisine": "Hangzhou home-style cuisine",
              "signature_dishes": "Grandma's braised pork, tea-flavored chicken, seasonal vegetables",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "18:30",
                "end": "20:00"
              },
              "links": {}
            }
          },
          "attractions": [
            {
              "name": "è¥¿æ¹– / West Lake",
              "name_en": "",
              "location": "Xihu District, Hangzhou / æ­å·å¸‚è¥¿æ¹–åŒºé¾™äº•è·¯1å·",
              "type": "Lake / Scenic Area / Unesco World Heritage",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "24 hours (open scenic area)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "11:45",
                "end": "15:45"
              },
              "links": {}
            },
            {
              "name": "çµéšå¯º / Lingyin Temple",
              "name_en": "",
              "location": "Xihu District, Hangzhou / æ­å·å¸‚è¥¿æ¹–åŒºæ³•äº‘å¼„1å·",
              "type": "Buddhist Temple / Historic Site",
              "cost": 10,
              "cost_eur": 0,
              "opening_hours": "07:00-18:00 (varies by season)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "18:00",
                "end": "20:30"
              },
              "links": {}
            },
            {
              "name": "é¾™äº•æ‘ / Longjing Tea Village",
              "name_en": "",
              "location": "Xihu District, Hangzhou / æ­å·å¸‚è¥¿æ¹–åŒºé¾™äº•æ‘",
              "type": "Tea Plantation Village / Cultural Experience",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "24 hours (village access), tea houses typically 08:00-18:00",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "10:00",
                "end": "12:00"
              },
              "links": {}
            },
            {
              "name": "è¥¿æºªæ¹¿åœ° / Xixi Wetland",
              "name_en": "",
              "location": "Xihu District, Hangzhou / æ­å·å¸‚è¥¿æ¹–åŒºå¤©ç›®å±±è·¯",
              "type": "Wetland Park / Nature Reserve",
              "cost": 12,
              "cost_eur": 0,
              "opening_hours": "08:00-17:30 (varies by season)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "12:30",
                "end": "14:30"
              },
              "links": {}
            }
          ],
          "entertainment": [
            {
              "name": "Impression West Lake Show",
              "name_en": "",
              "type": "Cultural Performance - Outdoor Show",
              "cost": 320,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "19:40",
              "links": {}
            },
            {
              "name": "West Lake Night Cruise (Alternative)",
              "name_en": "",
              "type": "Lake Cruise",
              "cost": 120,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "19:30",
              "links": {}
            }
          ],
          "accommodation": {
            "name": "Hangzhou West Lake Hubin Yintai Atour Hotel",
            "name_cn": "",
            "type": "Hotel",
            "location": "Jingjin Mansion, 228 Zhonghe Middle Road, Shangcheng District, Hangzhou",
            "cost": 520,
            "stars": 3,
            "time": {
              "start": "15:00",
              "end": "16:00"
            },
            "links": {},
            "image": "https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=300&fit=crop"
          },
          "transportation": {
            "from": "Suzhou",
            "to": "Hangzhou",
            "departure_point": "",
            "arrival_point": "",
            "departure_time": "Morning (08:00-09:00)",
            "arrival_time": "1-1.5 hours later",
            "transport_type": "High-speed Train",
            "icon": "ğŸš„",
            "route_number": "VERIFIED",
            "airline": "",
            "cost": 65,
            "booking_status": "VERIFIED",
            "booking_urgency": "",
            "notes": "Very short high-speed train journey (under 90 minutes). Metro Line 4 from Hangzhou East to city center. Frequent trains available throughout the day, no need for advance booking. Can depart mid-morning and still have full day in Hangzhou.",
            "time": {
              "start": "Morning (08:00-09:00)",
              "end": "1-1.5 hours later"
            }
          },
          "budget": {
            "meals": 420,
            "attractions": 22,
            "entertainment": 440,
            "accommodation": 520,
            "total": 1402
          }
        }
      ]
    },
    {
      "name": "Guilin",
      "days_label": "1 day",
      "cover": "https://images.unsplash.com/photo-1470004914212-05527e49370b?w=1200&h=400&fit=crop",
      "days": [
        {
          "day": 8,
          "date": "Day 8",
          "location": "Guilin",
          "cover": "https://images.unsplash.com/photo-1470004914212-05527e49370b?w=1200&h=400&fit=crop",
          "user_plans": [
            "æ¼“æ±Ÿæ¸¸èˆ¹ (Li River cruise) æ¡‚æ—è‡³é˜³æœ”",
            "æŠµè¾¾é˜³æœ” (Yangshuo)",
            "è¥¿è¡— (West Street) æ™šé¤",
            "å°è±¡åˆ˜ä¸‰å§ (Impression Liu Sanjie) æ¼”å‡º"
          ],
          "meals": {
            "breakfast": {
              "name": "èŠ±æ¡¥è£è®°æ¡‚æ—ç±³ç²‰ / Huaqiao Rongji Guilin Rice Noodles (Xungen Branch)",
              "name_en": "",
              "cost": 20,
              "cuisine": "Guilin rice noodles",
              "signature_dishes": "Fresh-pressed rice noodles with various toppings (marinated beef, braised pork, pickled beans)",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "08:00",
                "end": "09:00"
              },
              "links": {}
            },
            "lunch": {
              "name": "Riverside restaurant in Yangshuo",
              "name_en": "",
              "cost": 80,
              "cuisine": "Guangxi cuisine",
              "signature_dishes": "Li River fish, bamboo rice, stir-fried river snails",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "12:00",
                "end": "13:30"
              },
              "links": {}
            },
            "dinner": {
              "name": "å¤§å¸ˆå‚…é‡‘å¥–å•¤é…’é±¼ / Master Fu Gold Award Beer Fish (West Street Main Store)",
              "name_en": "",
              "cost": 150,
              "cuisine": "Yangshuo specialties",
              "signature_dishes": "Beer fish (Li River fish cooked with beer), bamboo rice, local river specialties",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "18:30",
                "end": "20:00"
              },
              "links": {}
            }
          },
          "attractions": [
            {
              "name": "æ¼“æ±Ÿæ¸¸èˆ¹ / Li River Cruise",
              "name_en": "",
              "location": "From Guilin to Yangshuo / æ¡‚æ—å¸‚-é˜³æœ”å¿",
              "type": "River Cruise / Scenic Cruise",
              "cost": 30,
              "cost_eur": 0,
              "opening_hours": "Cruises typically depart 09:00-10:00, journey is 4-5 hours",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "15:30",
                "end": "20:30"
              },
              "links": {}
            },
            {
              "name": "è¥¿è¡— / West Street (Yangshuo)",
              "name_en": "",
              "location": "Yangshuo County, Guilin / é˜³æœ”å¿è¥¿è¡—",
              "type": "Historic Pedestrian Street / Nightlife",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "24 hours (shops 10:00-late night)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "10:00",
                "end": "12:00"
              },
              "links": {}
            },
            {
              "name": "å°è±¡åˆ˜ä¸‰å§ / Impression Liu Sanjie",
              "name_en": "",
              "location": "Yangshuo County, Guilin / é˜³æœ”å¿ç”°å›­è·¯",
              "type": "Outdoor Performance / Cultural Show",
              "cost": 35,
              "cost_eur": 0,
              "opening_hours": "Shows at 20:00 and 21:35 (seasonal, check schedule)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "12:30",
                "end": "14:30"
              },
              "links": {}
            }
          ],
          "entertainment": [
            {
              "name": "Impression Liu Sanjie Show",
              "name_en": "",
              "type": "Cultural Performance - Outdoor Show",
              "cost": 320,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "19:45",
              "links": {}
            },
            {
              "name": "West Street Night Market",
              "name_en": "",
              "type": "Street Entertainment",
              "cost": 0,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "21:30",
              "links": {}
            }
          ],
          "accommodation": {
            "name": "Holiday Inn Express Guilin City Center",
            "name_cn": "",
            "type": "Hotel",
            "location": "30 Yiren Road, Xiufeng District, Guilin, Guangxi Province",
            "cost": 400,
            "stars": 3,
            "time": {
              "start": "15:00",
              "end": "16:00"
            },
            "links": {},
            "image": "https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=300&fit=crop"
          },
          "transportation": {
            "from": "Hangzhou",
            "to": "Guilin",
            "departure_point": "",
            "arrival_point": "",
            "departure_time": "Early morning (06:00-07:00)",
            "arrival_time": "8-9 hours later",
            "transport_type": "High-speed Train",
            "icon": "ğŸš„",
            "route_number": "VERIFIED",
            "airline": "",
            "cost": 620,
            "booking_status": "VERIFIED",
            "booking_urgency": "",
            "notes": "G263 high-speed train is fastest option (~8 hours). Alternative: overnight train D195 from Hangzhou South via Shanghai South (16+ hours, ~480 CNY). Early morning departure recommended to catch Li River cruise in afternoon. Bus K2 or taxi from Guilin North to cruise departure point.",
            "time": {
              "start": "Early morning (06:00-07:00)",
              "end": "8-9 hours later"
            }
          },
          "budget": {
            "meals": 250,
            "attractions": 65,
            "entertainment": 320,
            "accommodation": 400,
            "total": 1035
          }
        }
      ]
    },
    {
      "name": "Yangshuo",
      "days_label": "1 day",
      "cover": "https://images.unsplash.com/photo-1609766856923-7e0a23024e9c?w=1200&h=400&fit=crop",
      "days": [
        {
          "day": 9,
          "date": "Day 9",
          "location": "Yangshuo",
          "cover": "https://images.unsplash.com/photo-1609766856923-7e0a23024e9c?w=1200&h=400&fit=crop",
          "user_plans": [
            "é‡é¾™æ²³ç«¹ç­æ¼‚æµ (Yulong River bamboo rafting)",
            "åé‡Œç”»å»Šéª‘è¡Œ (Ten-Mile Gallery cycling)",
            "é“¶å­å²© (Silver Cave) æˆ– æœˆäº®å±± (Moon Hill)",
            "è¿”å›æ¡‚æ—"
          ],
          "meals": {
            "breakfast": {
              "name": "æ¨å“¥æ­£å®—æ¡‚æ—ç±³ç²‰ / Yang Ge Authentic Guilin Rice Noodles",
              "name_en": "",
              "cost": 18,
              "cuisine": "Guilin rice noodles",
              "signature_dishes": "Guilin rice noodles, traditional breakfast",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "08:00",
                "end": "08:30"
              },
              "links": {}
            },
            "lunch": {
              "name": "æ¤¿è®°çƒ§é¹… / Chun Ji Roast Goose (West Street)",
              "name_en": "",
              "cost": 100,
              "cuisine": "Cantonese roast meats",
              "signature_dishes": "Roast goose, char siu (BBQ pork), roast duck",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "12:00",
                "end": "13:30"
              },
              "links": {}
            },
            "dinner": {
              "name": "è°¢ä¸‰å§é‡‘å¥–å•¤é…’é±¼ / Xie Sanjie Gold Award Beer Fish (Main Store)",
              "name_en": "",
              "cost": 140,
              "cuisine": "Yangshuo specialties",
              "signature_dishes": "Beer fish, stir-fried river snails, Guilin specialties",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "18:30",
                "end": "20:00"
              },
              "links": {}
            }
          },
          "attractions": [
            {
              "name": "é‡é¾™æ²³ç«¹ç­æ¼‚æµ / Yulong River Bamboo Rafting",
              "name_en": "",
              "location": "Yangshuo County / é˜³æœ”å¿é‡é¾™æ²³",
              "type": "River Rafting / Scenic Activity",
              "cost": 18,
              "cost_eur": 0,
              "opening_hours": "07:30-17:30 (approximately)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "09:00",
                "end": "11:00"
              },
              "links": {}
            },
            {
              "name": "åé‡Œç”»å»Š / Ten-Mile Gallery",
              "name_en": "",
              "location": "Yangshuo County / é˜³æœ”å¿åé‡Œç”»å»Š",
              "type": "Scenic Cycling Route",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "24 hours (road access)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "10:00",
                "end": "12:00"
              },
              "links": {}
            },
            {
              "name": "é“¶å­å²© / Silver Cave",
              "name_en": "",
              "location": "Yangshuo/Lipu County / è”æµ¦å¿é©¬å²­é•‡",
              "type": "Karst Cave",
              "cost": 9,
              "cost_eur": 0,
              "opening_hours": "08:00-17:30",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "12:30",
                "end": "14:30"
              },
              "links": {}
            },
            {
              "name": "æœˆäº®å±± / Moon Hill",
              "name_en": "",
              "location": "Yangshuo County / é˜³æœ”å¿é«˜ç”°é•‡",
              "type": "Mountain / Hiking / Viewpoint",
              "cost": 2,
              "cost_eur": 0,
              "opening_hours": "07:00-18:00",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "16:45",
                "end": "18:15"
              },
              "links": {}
            }
          ],
          "entertainment": [
            {
              "name": "Rest Evening",
              "name_en": "",
              "type": "Rest Day",
              "cost": 0,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "N/A",
              "links": {}
            }
          ],
          "accommodation": {
            "name": "The Bamboo Leaf Yangshuo",
            "name_cn": "",
            "type": "Resort Hotel",
            "location": "48 Shibanqiao Village, Yangshuo County, Guilin, Guangxi Province",
            "cost": 480,
            "stars": 3,
            "time": {
              "start": "15:00",
              "end": "16:00"
            },
            "links": {},
            "image": "https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=300&fit=crop"
          },
          "transportation": {
            "from": "Guilin",
            "to": "Yangshuo",
            "departure_point": "",
            "arrival_point": "",
            "departure_time": "Morning (09:00-10:00)",
            "arrival_time": "4-5 hours later (cruise time)",
            "transport_type": "Li River Cruise + Bus",
            "icon": "ğŸšŒ",
            "route_number": "VERIFIED",
            "airline": "",
            "cost": 220,
            "booking_status": "VERIFIED",
            "booking_urgency": "",
            "notes": "Li River cruise is THE recommended way to travel Guilin to Yangshuo (included in itinerary plans). Scenic 4-hour cruise. Alternative: Direct bus (2 hours, 80 KM, ~20 CNY) but misses the famous karst landscape scenery. Book cruise in advance, especially peak season.",
            "time": {
              "start": "Morning (09:00-10:00)",
              "end": "4-5 hours later (cruise time)"
            }
          },
          "budget": {
            "meals": 258,
            "attractions": 29,
            "entertainment": 0,
            "accommodation": 480,
            "total": 767
          }
        }
      ]
    },
    {
      "name": "Zhangjiajie",
      "days_label": "1 day",
      "cover": "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1200&h=400&fit=crop",
      "days": [
        {
          "day": 10,
          "date": "Day 10",
          "location": "Zhangjiajie",
          "cover": "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1200&h=400&fit=crop",
          "user_plans": [
            "å¼ å®¶ç•Œå›½å®¶æ£®æ—å…¬å›­ (Zhangjiajie National Forest Park)",
            "è¢å®¶ç•Œ (Yuanjiajie) - é˜¿å‡¡è¾¾å±± (Avatar Hallelujah Mountain)",
            "å¤©å­å±± (Tianzi Mountain) ç¼†è½¦",
            "é‡‘é­æºª (Golden Whip Stream) å¿«é€Ÿå¾’æ­¥"
          ],
          "meals": {
            "breakfast": {
              "name": "æ™¯åŒºå†…æ—©é¤ / Breakfast inside scenic area",
              "name_en": "",
              "cost": 40,
              "cuisine": "Simple breakfast",
              "signature_dishes": "Noodles, buns, rice porridge",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "16:15",
                "end": "17:00"
              },
              "links": {}
            },
            "lunch": {
              "name": "äº¬è¿å®¶åº­ç¾é£Ÿé¦† / Jingying Family Restaurant",
              "name_en": "",
              "cost": 80,
              "cuisine": "Hunan home cooking",
              "signature_dishes": "Tujia specialties, wild vegetables, local chicken",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "12:00",
                "end": "13:30"
              },
              "links": {}
            },
            "dinner": {
              "name": "åœŸå®¶é‡èœé¦† / Tujia Wild Vegetables Restaurant",
              "name_en": "",
              "cost": 100,
              "cuisine": "Tujia minority cuisine",
              "signature_dishes": "Wild mountain vegetables, cured meats, spicy chicken",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "19:45",
                "end": "21:15"
              },
              "links": {}
            }
          },
          "attractions": [
            {
              "name": "å¼ å®¶ç•Œå›½å®¶æ£®æ—å…¬å›­ / Zhangjiajie National Forest Park",
              "name_en": "",
              "location": "Zhangjiajie City, Hunan / æ¹–å—çœå¼ å®¶ç•Œå¸‚æ­¦é™µæºåŒº",
              "type": "National Park / Unesco World Heritage / Scenic Area",
              "cost": 33,
              "cost_eur": 0,
              "opening_hours": "07:00-18:00 (varies by season)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "17:15",
                "end": "19:15"
              },
              "links": {}
            },
            {
              "name": "è¢å®¶ç•Œ / Yuanjiajie (Avatar Hallelujah Mountain)",
              "name_en": "",
              "location": "Within Zhangjiajie National Forest Park / å¼ å®¶ç•Œå›½å®¶æ£®æ—å…¬å›­è¢å®¶ç•Œæ™¯åŒº",
              "type": "Mountain Scenic Area / Viewpoints",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "Included in park hours 07:00-18:00",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "10:00",
                "end": "12:00"
              },
              "links": {}
            },
            {
              "name": "å¤©å­å±± / Tianzi Mountain",
              "name_en": "",
              "location": "Within Zhangjiajie National Forest Park / å¼ å®¶ç•Œå›½å®¶æ£®æ—å…¬å›­å¤©å­å±±æ™¯åŒº",
              "type": "Mountain Scenic Area / Cable Car",
              "cost": 10,
              "cost_eur": 0,
              "opening_hours": "Included in park hours 07:00-18:00",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "12:30",
                "end": "14:30"
              },
              "links": {}
            },
            {
              "name": "é‡‘é­æºª / Golden Whip Stream",
              "name_en": "",
              "location": "Within Zhangjiajie National Forest Park / å¼ å®¶ç•Œå›½å®¶æ£®æ—å…¬å›­é‡‘é­æºªæ™¯åŒº",
              "type": "Stream Valley / Hiking Trail",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "Included in park hours 07:00-18:00",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "15:00",
                "end": "17:00"
              },
              "links": {}
            }
          ],
          "entertainment": [
            {
              "name": "Tianmen Fox Fairy Show",
              "name_en": "",
              "type": "Cultural Performance - Outdoor Show",
              "cost": 280,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": {
                "start": "19:30",
                "end": "21:00"
              },
              "links": {}
            },
            {
              "name": "Charming Xiangxi Show (Alternative)",
              "name_en": "",
              "type": "Cultural Performance - Indoor Show",
              "cost": 240,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "20:20",
              "links": {}
            }
          ],
          "accommodation": {
            "name": "Hilton Garden Inn Zhangjiajie Wulingyuan",
            "name_cn": "",
            "type": "Hotel",
            "location": "108 Baofeng Road, Wulingyuan District, Zhangjiajie, Hunan Province",
            "cost": 550,
            "stars": 3,
            "time": {
              "start": "15:00",
              "end": "16:00"
            },
            "links": {},
            "image": "https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=300&fit=crop"
          },
          "transportation": {
            "from": "Yangshuo",
            "to": "Zhangjiajie",
            "departure_point": "",
            "arrival_point": "",
            "departure_time": "Morning (08:00-09:00)",
            "arrival_time": "6-7 hours later (with transfer)",
            "transport_type": "High-speed Train",
            "icon": "ğŸš„",
            "route_number": "VERIFIED",
            "airline": "",
            "cost": 380,
            "booking_status": "VERIFIED",
            "booking_urgency": "",
            "notes": "Route requires transfer: Yangshuo â†’ Guilin â†’ Nanning â†’ Zhangjiajie West. Alternative direct bus from Yangshuo to Guilin (1.5 hours), then D3968 train from Guilin. Bus 17 from Zhangjiajie West to city center. Complex route, consider booking package tour or arrange transfer in advance.",
            "time": {
              "start": "Morning (08:00-09:00)",
              "end": "6-7 hours later (with transfer)"
            }
          },
          "budget": {
            "meals": 220,
            "attractions": 43,
            "entertainment": 520,
            "accommodation": 550,
            "total": 1333
          }
        }
      ]
    },
    {
      "name": "Guangzhou",
      "days_label": "1 day",
      "cover": "https://images.unsplash.com/photo-1470004914212-05527e49370b?w=1200&h=400&fit=crop",
      "days": [
        {
          "day": 11,
          "date": "Day 11",
          "location": "Guangzhou",
          "cover": "https://images.unsplash.com/photo-1470004914212-05527e49370b?w=1200&h=400&fit=crop",
          "user_plans": [
            "å¹¿å·å¡” (Canton Tower)",
            "æ²™é¢å²› (Shamian Island) æ®–æ°‘å»ºç­‘",
            "é™ˆå®¶ç¥  (Chen Clan Ancestral Hall)",
            "ç‚¹å¿ƒæ–‡åŒ–ä½“éªŒ - æ—©èŒ¶æˆ–æ™šèŒ¶",
            "é«˜é“è‡³æ·±åœ³"
          ],
          "meals": {
            "breakfast": {
              "name": "ç‚¹éƒ½å¾· / Dian Dou De (Beijing Road 1st Branch)",
              "name_en": "",
              "cost": 80,
              "cuisine": "Cantonese dim sum",
              "signature_dishes": "Shrimp dumplings (har gow), pork buns (char siu bao), rice rolls, phoenix claws",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "16:30",
                "end": "17:30"
              },
              "links": {}
            },
            "lunch": {
              "name": "è“‰æ¥¼èŒ¶å±… / Rong Lou Tea House (Yuexiu Park Xiaobei)",
              "name_en": "",
              "cost": 100,
              "cuisine": "Cantonese tea house",
              "signature_dishes": "Dim sum variety, roast meats, congee",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "12:00",
                "end": "13:30"
              },
              "links": {}
            },
            "dinner": {
              "name": "æ±¤å®´æ±‡Â·å¹¿åºœèåˆèœÂ·æ—©èŒ¶ / Tang Yan Hui Cantonese Fusion (Lujiang Store)",
              "name_en": "",
              "cost": 150,
              "cuisine": "Cantonese fusion",
              "signature_dishes": "Soup specialties, Cantonese classics with modern twist",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "18:30",
                "end": "20:00"
              },
              "links": {}
            }
          },
          "attractions": [
            {
              "name": "å¹¿å·å¡” / Canton Tower",
              "name_en": "",
              "location": "Haizhu District, Guangzhou / å¹¿å·å¸‚æµ·ç åŒºé˜…æ±Ÿè¥¿è·¯222å·",
              "type": "Observation Tower / Landmark",
              "cost": 21,
              "cost_eur": 0,
              "opening_hours": "09:30-22:30",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "17:45",
                "end": "19:45"
              },
              "links": {}
            },
            {
              "name": "æ²™é¢å²› / Shamian Island",
              "name_en": "",
              "location": "Liwan District, Guangzhou / å¹¿å·å¸‚è”æ¹¾åŒºæ²™é¢è¡—é“",
              "type": "Historic District / Colonial Architecture",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "24 hours (public area)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "10:00",
                "end": "12:00"
              },
              "links": {}
            },
            {
              "name": "é™ˆå®¶ç¥  / Chen Clan Ancestral Hall",
              "name_en": "",
              "location": "Liwan District, Guangzhou / å¹¿å·å¸‚è”æ¹¾åŒºä¸­å±±ä¸ƒè·¯æ©é¾™é‡Œ34å·",
              "type": "Ancestral Hall / Museum / Historic Architecture",
              "cost": 1.5,
              "cost_eur": 0,
              "opening_hours": "08:30-17:30",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "12:30",
                "end": "14:30"
              },
              "links": {}
            }
          ],
          "entertainment": [
            {
              "name": "Pearl River Night Cruise",
              "name_en": "",
              "type": "River Cruise",
              "cost": 90,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": {
                "start": "19:45",
                "end": "21:00"
              },
              "links": {}
            },
            {
              "name": "Canton Tower Light Show",
              "name_en": "",
              "type": "Light Show",
              "cost": 0,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "20:30",
              "links": {}
            }
          ],
          "accommodation": {
            "name": "ARTHUR HOTEL CANTON TOWER GUANGZHOU",
            "name_cn": "",
            "type": "Hotel",
            "location": "375 Xingang Middle Road, Haizhu District, Guangzhou, Guangdong Province",
            "cost": 500,
            "stars": 3,
            "time": {
              "start": "15:00",
              "end": "16:00"
            },
            "links": {},
            "image": "https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=300&fit=crop"
          },
          "transportation": {
            "from": "Zhangjiajie",
            "to": "Guangzhou",
            "departure_point": "",
            "arrival_point": "",
            "departure_time": "Morning (08:00-09:00)",
            "arrival_time": "7-8 hours later",
            "transport_type": "High-speed Train",
            "icon": "ğŸš„",
            "route_number": "VERIFIED",
            "airline": "",
            "cost": 480,
            "booking_status": "VERIFIED",
            "booking_urgency": "",
            "notes": "G6115 high-speed train recommended. Metro Line 12 + Line 2 from Guangzhou Baiyun to city center. Overnight train Z235 available (16+ hours, ~350 CNY). Arrive by late afternoon to explore Canton Tower at night.",
            "time": {
              "start": "Morning (08:00-09:00)",
              "end": "7-8 hours later"
            }
          },
          "budget": {
            "meals": 330,
            "attractions": 22.5,
            "entertainment": 90,
            "accommodation": 500,
            "total": 942.5
          }
        }
      ]
    },
    {
      "name": "Shenzhen",
      "days_label": "1 day",
      "cover": "https://images.unsplash.com/photo-1609766856923-7e0a23024e9c?w=1200&h=400&fit=crop",
      "days": [
        {
          "day": 12,
          "date": "Day 12",
          "location": "Shenzhen",
          "cover": "https://images.unsplash.com/photo-1609766856923-7e0a23024e9c?w=1200&h=400&fit=crop",
          "user_plans": [
            "æ·±åœ³åä¾¨åŸ (OCT Loft) æˆ– æµ·ä¸Šä¸–ç•Œ (Sea World)",
            "å£å²¸è¿‡å…³è‡³é¦™æ¸¯",
            "å¤ªå¹³å±± (Victoria Peak) ç¼†è½¦+å¤œæ™¯",
            "å°–æ²™å’€ (Tsim Sha Tsui) ç»´æ¸¯å¤œæ™¯",
            "åº™è¡—å¤œå¸‚ (Temple Street Night Market)"
          ],
          "meals": {
            "breakfast": {
              "name": "æ·±åœ³æ—©é¤ / Shenzhen breakfast (hotel or nearby)",
              "name_en": "",
              "cost": 50,
              "cuisine": "Cantonese breakfast",
              "signature_dishes": "Dim sum, congee, noodles",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "08:00",
                "end": "09:00"
              },
              "links": {}
            },
            "lunch": {
              "name": "Tim Ho Wan / æ·»å¥½è¿ (Hong Kong Station)",
              "name_en": "",
              "cost": 100,
              "cuisine": "Michelin-starred dim sum",
              "signature_dishes": "BBQ pork buns, rice rolls, shrimp dumplings",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "16:30",
                "end": "17:30"
              },
              "links": {}
            },
            "dinner": {
              "name": "Dim Sum Here / ç‚¹ç‚¹å¿ƒ (Jordan Temple Street)",
              "name_en": "",
              "cost": 120,
              "cuisine": "Hong Kong dim sum",
              "signature_dishes": "Creative dim sum varieties, traditional favorites",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "22:30",
                "end": "23:30"
              },
              "links": {}
            }
          },
          "attractions": [
            {
              "name": "æ·±åœ³åä¾¨åŸ / OCT Loft",
              "name_en": "",
              "location": "Nanshan District, Shenzhen / æ·±åœ³å¸‚å—å±±åŒºåä¾¨åŸåˆ›æ„æ–‡åŒ–å›­",
              "type": "Arts District / Creative Park",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "10:00-22:00 (approximately, venues vary)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "12:30",
                "end": "14:30"
              },
              "links": {}
            },
            {
              "name": "å¤ªå¹³å±± / Victoria Peak",
              "name_en": "",
              "location": "Central & Western District, Hong Kong / é¦™æ¸¯ä¸­è¥¿åŒºå±±é¡¶é“",
              "type": "Mountain / Observation Deck / Tourist Attraction",
              "cost": 9,
              "cost_eur": 0,
              "opening_hours": "Peak Tram: 07:00-midnight, Peak area: 24 hours",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "18:00",
                "end": "20:30"
              },
              "links": {}
            },
            {
              "name": "å°–æ²™å’€ / Tsim Sha Tsui",
              "name_en": "",
              "location": "Kowloon, Hong Kong / é¦™æ¸¯ä¹é¾™å°–æ²™å’€",
              "type": "Shopping District / Waterfront / Tourist Area",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "24 hours (public area)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "20:30",
                "end": "22:30"
              },
              "links": {}
            },
            {
              "name": "åº™è¡—å¤œå¸‚ / Temple Street Night Market",
              "name_en": "",
              "location": "Yau Ma Tei, Kowloon, Hong Kong / é¦™æ¸¯æ²¹éº»åœ°åº™è¡—",
              "type": "Night Market / Street Market",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "18:00-23:00 (approximately)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "10:00",
                "end": "12:00"
              },
              "links": {}
            }
          ],
          "entertainment": [
            {
              "name": "Victoria Peak Night View",
              "name_en": "",
              "type": "Attraction - Night View",
              "cost": 99,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "18:30",
              "links": {}
            },
            {
              "name": "A Symphony of Lights",
              "name_en": "",
              "type": "Light Show",
              "cost": 0,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": {
                "start": "20:00",
                "end": "20:10"
              },
              "links": {}
            },
            {
              "name": "Temple Street Night Market",
              "name_en": "",
              "type": "Night Market",
              "cost": 0,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "21:00",
              "links": {}
            }
          ],
          "accommodation": {
            "name": "Hyatt Place Shenzhen Dongmen",
            "name_cn": "",
            "type": "Hotel",
            "location": "3018 Jianshe Road, Luohu District, Shenzhen, Guangdong Province",
            "cost": 580,
            "stars": 3,
            "time": {
              "start": "15:00",
              "end": "16:00"
            },
            "links": {},
            "image": "https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=300&fit=crop"
          },
          "transportation": {
            "from": "Guangzhou",
            "to": "Shenzhen",
            "departure_point": "",
            "arrival_point": "",
            "departure_time": "Flexible (frequent service)",
            "arrival_time": "1.5-2 hours later",
            "transport_type": "High-speed Train",
            "icon": "ğŸš„",
            "route_number": "VERIFIED",
            "airline": "",
            "cost": 80,
            "booking_status": "VERIFIED",
            "booking_urgency": "",
            "notes": "Multiple options: (1) High-speed train from Guangzhou South to Shenzhen Futian (30 min, ~75 CNY, most common), (2) Long-distance bus (2-3 hours, ~80 CNY), (3) Private car service. Trains depart every 15-30 minutes. Metro Line 11 in Shenzhen connects to all major areas.",
            "time": {
              "start": "Flexible (frequent service)",
              "end": "1.5-2 hours later"
            }
          },
          "budget": {
            "meals": 270,
            "attractions": 9,
            "entertainment": 99,
            "accommodation": 580,
            "total": 958
          }
        }
      ]
    },
    {
      "name": "Hong Kong",
      "days_label": "1 day",
      "cover": "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1200&h=400&fit=crop",
      "days": [
        {
          "day": 13,
          "date": "Day 13",
          "location": "Hong Kong",
          "cover": "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1200&h=400&fit=crop",
          "user_plans": [
            "å¤§å±¿å±± (Lantau Island) - å¤©å›å¤§ä½› (Tian Tan Buddha)",
            "æ˜‚åª360ç¼†è½¦",
            "æ¸¡è½®è‡³æ¾³é—¨",
            "å¤§ä¸‰å·´ç‰ŒåŠ (Ruins of St. Paul's) - UNESCO",
            "æ¾³é—¨å¨å°¼æ–¯äºº (The Venetian Macao)",
            "è‘¡å¼è›‹æŒå“å°"
          ],
          "meals": {
            "breakfast": {
              "name": "One Dim Sum / ä¸€ç‚¹å¿ƒ (Prince Edward)",
              "name_en": "",
              "cost": 80,
              "cuisine": "Hong Kong dim sum",
              "signature_dishes": "Steamed dumplings, BBQ pork buns, egg tarts",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "08:00",
                "end": "09:00"
              },
              "links": {}
            },
            "lunch": {
              "name": "Ngong Ping / æ˜‚åª (Lantau Island restaurant)",
              "name_en": "",
              "cost": 100,
              "cuisine": "Chinese vegetarian/regular",
              "signature_dishes": "Vegetarian dishes (near monastery), noodles, rice sets",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "12:30",
                "end": "14:00"
              },
              "links": {}
            },
            "dinner": {
              "name": "Margaret's CafÃ© e Nata / ç›å˜‰çƒˆè›‹æŒåº—",
              "name_en": "",
              "cost": 30,
              "cuisine": "Portuguese pastries",
              "signature_dishes": "Portuguese egg tarts (pastel de nata)",
              "image": "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=300&h=200&fit=crop",
              "time": {
                "start": "18:30",
                "end": "19:00"
              },
              "links": {}
            }
          },
          "attractions": [
            {
              "name": "å¤§å±¿å±± / Lantau Island",
              "name_en": "",
              "location": "New Territories, Hong Kong / é¦™æ¸¯å¤§å±¿å±±",
              "type": "Island / Nature / Tourist Area",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "24 hours (island access)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "10:00",
                "end": "12:00"
              },
              "links": {}
            },
            {
              "name": "å¤©å›å¤§ä½› / Tian Tan Buddha",
              "name_en": "",
              "location": "Ngong Ping, Lantau Island, Hong Kong / é¦™æ¸¯å¤§å±¿å±±æ˜‚åª",
              "type": "Buddhist Statue / Monument",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "10:00-17:30",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "10:45",
                "end": "12:15"
              },
              "links": {}
            },
            {
              "name": "æ˜‚åª360ç¼†è½¦ / Ngong Ping 360",
              "name_en": "",
              "location": "Tung Chung to Ngong Ping, Lantau Island / é¦™æ¸¯å¤§å±¿å±±ä¸œæ¶Œè‡³æ˜‚åª",
              "type": "Cable Car / Scenic Transport",
              "cost": 33,
              "cost_eur": 0,
              "opening_hours": "Monday-Friday 10:00-18:00, Weekend 09:00-18:30 (varies seasonally)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "10:00",
                "end": "10:45"
              },
              "links": {}
            },
            {
              "name": "å¤§ä¸‰å·´ç‰ŒåŠ / Ruins of St. Paul's",
              "name_en": "",
              "location": "Historic Centre of Macau / æ¾³é—¨å¤§ä¸‰å·´è¡—",
              "type": "Historic Ruins / Unesco World Heritage",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "24 hours (outdoor monument)",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "15:45",
                "end": "16:45"
              },
              "links": {}
            },
            {
              "name": "æ¾³é—¨å¨å°¼æ–¯äºº / The Venetian Macao",
              "name_en": "",
              "location": "Cotai, Macau / æ¾³é—¨è·¯æ°¹å¡«æµ·åŒºæœ›å¾·åœ£æ¯æ¹¾å¤§é©¬è·¯",
              "type": "Casino Resort / Shopping Mall / Entertainment",
              "cost": 0,
              "cost_eur": 0,
              "opening_hours": "24 hours (casino and hotel), shops 10:00-23:00",
              "recommended_duration": "",
              "image": "https://images.unsplash.com/photo-1548013146-72479768bada?w=400&h=300&fit=crop",
              "highlights": [],
              "time": {
                "start": "19:15",
                "end": "21:15"
              },
              "links": {}
            }
          ],
          "entertainment": [
            {
              "name": "The House of Dancing Water",
              "name_en": "",
              "type": "Cultural Performance - Aquatic Show",
              "cost": 898,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": {
                "start": "20:00",
                "end": "21:30"
              },
              "links": {}
            },
            {
              "name": "Venetian Macau (Alternative Evening)",
              "name_en": "",
              "type": "Casino Resort Entertainment",
              "cost": 0,
              "duration": "",
              "note": "",
              "image": "https://images.unsplash.com/photo-1499364615650-ec38552f4f34?w=400&h=300&fit=crop",
              "time": "19:00",
              "links": {}
            }
          ],
          "accommodation": {
            "name": "Holiday Inn Golden Mile Hong Kong",
            "name_cn": "",
            "type": "Hotel",
            "location": "50 Nathan Road, Tsim Sha Tsui, Kowloon, Hong Kong",
            "cost": 850,
            "stars": 3,
            "time": {
              "start": "15:00",
              "end": "16:00"
            },
            "links": {},
            "image": "https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=300&fit=crop"
          },
          "transportation": {
            "from": "Shenzhen",
            "to": "Hong Kong",
            "departure_point": "",
            "arrival_point": "",
            "departure_time": "Flexible (frequent service)",
            "arrival_time": "1-2 hours later (including border crossing)",
            "transport_type": "Cross-border transit (MTR/Ferry)",
            "icon": "ğŸšŒ",
            "route_number": "VERIFIED",
            "airline": "",
            "cost": 90,
            "booking_status": "VERIFIED",
            "booking_urgency": "",
            "notes": "Multiple options: (1) MTR from Futian to Hong Kong via border crossing (1.5 hours, ~90 HKD), (2) Ferry from Shekou to Hong Kong Airport/Central (30 min + transit, ~200 HKD), (3) Cross-border bus. IMPORTANT: Valid travel documents required for Hong Kong entry. MTR most convenient. Hong Kong uses HKD currency (1 HKD â‰ˆ 0.88 CNY).",
            "time": {
              "start": "Flexible (frequent service)",
              "end": "1-2 hours later (including border crossing)"
            }
          },
          "budget": {
            "meals": 210,
            "attractions": 33,
            "entertainment": 898,
            "accommodation": 850,
            "total": 1991
          }
        }
      ]
    }
  ]
};

    
// ============================================================
// HOOKS
// ============================================================
const { useState, useEffect, useCallback } = React;

const useBreakpoint = () => {
  const [bp, setBp] = useState(() => {
    const w = window.innerWidth;
    return w < 640 ? 'sm' : w < 960 ? 'md' : 'lg';
  });
  useEffect(() => {
    const h = () => { const w = window.innerWidth; setBp(w < 640 ? 'sm' : w < 960 ? 'md' : 'lg'); };
    window.addEventListener('resize', h);
    return () => window.removeEventListener('resize', h);
  }, []);
  return bp;
};

// ============================================================
// ATOMS
// ============================================================
const LinkChip = ({ href, type, compact }) => {
  if (!href) return null;
  const cfg = {
    google_maps: { icon: 'ğŸŒ', label: 'Google Maps', bg: '#edf2fc', color: '#2b63b5' },
    gaode: { icon: 'ğŸ—ºï¸', label: 'é«˜å¾·', bg: '#e9f5ec', color: '#1a7a32' },
    xiaohongshu: { icon: 'ğŸ“•', label: 'å°çº¢ä¹¦', bg: '#fce8e6', color: '#c5221f' },
    booking: { icon: 'ğŸ¨', label: 'Booking', bg: '#e8eaf6', color: '#1a237e' },
    dianping: { icon: 'â­', label: 'ç‚¹è¯„', bg: '#fff3e0', color: '#e65100' }
  }[type] || { icon: 'ğŸ”—', label: 'Link', bg: '#f5f5f5', color: '#666' };
  return (
    <a href={href} target="_blank" rel="noopener noreferrer" style={{
      display: 'inline-flex', alignItems: 'center', gap: '3px',
      padding: compact ? '2px 5px' : '2px 8px',
      background: cfg.bg, color: cfg.color,
      borderRadius: '3px', fontSize: compact ? '10px' : '11px',
      fontWeight: '500', textDecoration: 'none', transition: 'opacity .12s'
    }}
      onMouseEnter={e => e.currentTarget.style.opacity = '0.7'}
      onMouseLeave={e => e.currentTarget.style.opacity = '1'}
    >{cfg.icon}{compact ? '' : ` ${cfg.label}`}</a>
  );
};

const LinksRow = ({ links, compact }) => {
  if (!links || !Object.keys(links).length) return null;
  return (
    <div style={{ display: 'flex', flexWrap: 'wrap', gap: '4px', marginTop: '8px' }}>
      {Object.entries(links).map(([t, u]) => <LinkChip key={t} href={u} type={t} compact={compact} />)}
    </div>
  );
};

const PropertyRow = ({ label, children }) => (
  <div style={{ display: 'flex', alignItems: 'baseline', padding: '5px 0', fontSize: '14px', lineHeight: '1.6' }}>
    <span style={{ width: '130px', flexShrink: 0, color: '#9b9a97', fontSize: '13px' }}>{label}</span>
    <span style={{ color: '#37352f' }}>{children}</span>
  </div>
);

const Section = ({ title, icon, children }) => (
  <div style={{ marginBottom: '32px' }}>
    <div style={{
      display: 'flex', alignItems: 'center', gap: '8px',
      fontSize: '15px', fontWeight: '600', color: '#37352f',
      paddingBottom: '6px', marginBottom: '14px',
      borderBottom: '1px solid #edece9'
    }}>
      <span style={{ fontSize: '16px' }}>{icon}</span> {title}
    </div>
    {children}
  </div>
);

const Donut = ({ budget, size = 80, onBudgetClick, day }) => {
  const items = [
    { v: budget.meals || 0, c: '#f0b429', k: 'meals' },
    { v: budget.attractions || 0, c: '#4a90d9', k: 'attractions' },
    { v: budget.entertainment || 0, c: '#9b6dd7', k: 'entertainment' },
    { v: budget.accommodation || 0, c: '#45b26b', k: 'accommodation' }
  ].filter(i => i.v > 0);
  const t = items.reduce((s, i) => s + i.v, 0);
  if (t === 0) return null;
  let cum = 0;
  const p = (r, a) => ({ x: 50 + r * Math.cos((a - 90) * Math.PI / 180), y: 50 + r * Math.sin((a - 90) * Math.PI / 180) });
  const arc = (sa, ea) => { const s = p(44, ea), e = p(44, sa); return `M${s.x},${s.y}A44,44,0,${ea - sa > 180 ? 1 : 0},0,${e.x},${e.y}L50,50Z`; };
  return (
    <svg viewBox="0 0 100 100" style={{ width: size, height: size }}>
      {items.map((it, i) => { const a = (it.v / t) * 360; const d = arc(cum, cum + a); cum += a; return <path key={i} d={d} fill={it.c} style={{ cursor: onBudgetClick ? 'pointer' : 'default' }} onClick={() => onBudgetClick && onBudgetClick(it.k, day)} />; })}
      <circle cx="50" cy="50" r="24" fill="white" />
    </svg>
  );
};

const PropLine = ({ label, value }) => (
  <div style={{ fontSize: '12px', lineHeight: 1.7 }}>
    <span style={{ color: '#9b9a97' }}>{label}</span>{' '}
    <span style={{ color: '#37352f' }}>{value}</span>
  </div>
);

// ============================================================
// SIDEBAR
// ============================================================
const Sidebar = ({ trips, selTrip, selDay, onSelect, isOpen, onClose, bp }) => {
  const [exp, setExp] = useState({ [trips[0]?.name]: true });
  const mobile = bp === 'sm';
  const W = bp === 'lg' ? 240 : 220;

  return (
    <>
      {mobile && isOpen && <div onClick={onClose} style={{ position: 'fixed', inset: 0, background: 'rgba(0,0,0,0.2)', zIndex: 199 }} />}
      <div style={{
        width: W, flexShrink: 0, background: '#fbfbfa', borderRight: '1px solid #f0efed',
        padding: '14px 8px', overflowY: 'auto', height: '100vh',
        position: mobile ? 'fixed' : 'sticky', top: 0, left: 0, zIndex: 200,
        transform: mobile && !isOpen ? `translateX(-${W + 10}px)` : 'none',
        transition: 'transform .25s ease',
        boxShadow: mobile && isOpen ? '2px 0 8px rgba(0,0,0,0.06)' : 'none'
      }}>
        <div style={{ padding: '4px 10px 12px', fontSize: '12px', fontWeight: '600', color: '#37352f', display: 'flex', alignItems: 'center', gap: '6px', lineHeight: '1.45' }}>
          <span>ğŸ“‹</span>
          <span style={{ flex: 1 }}>{PLAN_DATA.trip_summary.description}</span>
          {mobile && <button onClick={onClose} style={{ background: 'none', border: 'none', cursor: 'pointer', color: '#b4b4b4', fontSize: '14px' }}>âœ•</button>}
        </div>

        {trips.map((trip, ti) => {
          const open = exp[trip.name] !== false;
          const has = trip.days.length > 0;
          return (
            <div key={trip.name}>
              <div
                onClick={() => { setExp(p => ({ ...p, [trip.name]: !p[trip.name] })); if (has) onSelect(ti, 0); if (mobile) onClose(); }}
                style={{
                  display: 'flex', alignItems: 'center', gap: '4px',
                  padding: '5px 10px', borderRadius: '5px', cursor: 'pointer',
                  fontSize: '13px', color: '#37352f',
                  background: selTrip === ti ? 'rgba(55,53,47,0.06)' : 'transparent',
                  borderLeft: selTrip === ti ? '2px solid #37352f' : '2px solid transparent',
                  transition: 'all .1s'
                }}
                onMouseEnter={e => { if (selTrip !== ti) e.currentTarget.style.background = 'rgba(55,53,47,0.03)'; }}
                onMouseLeave={e => { if (selTrip !== ti) e.currentTarget.style.background = 'transparent'; }}
              >
                <span style={{ fontSize: '9px', color: '#b4b4b4', transform: open ? 'rotate(90deg)' : '', transition: 'transform .15s', display: 'inline-block', marginRight: '2px' }}>â–¶</span>
                <span style={{ fontWeight: '500', flex: 1 }}>{trip.name}</span>
                <span style={{ fontSize: '11px', color: '#b4b4b4' }}>({trip.days_label})</span>
              </div>
              {open && has && (
                <div style={{ marginLeft: '16px' }}>
                  {trip.days.map((d, di) => {
                    const active = selTrip === ti && selDay === di;
                    return (
                      <div key={di}
                        onClick={() => { onSelect(ti, di); if (mobile) onClose(); }}
                        style={{
                          padding: '4px 10px', borderRadius: '5px', cursor: 'pointer',
                          fontSize: '13px', color: '#37352f',
                          background: active ? 'rgba(55,53,47,0.06)' : 'transparent',
                          fontWeight: active ? '500' : '400',
                          borderLeft: active ? '2px solid #37352f' : '2px solid transparent',
                          transition: 'all .1s'
                        }}
                        onMouseEnter={e => { if (!active) e.currentTarget.style.background = 'rgba(55,53,47,0.03)'; }}
                        onMouseLeave={e => { if (!active) e.currentTarget.style.background = active ? 'rgba(55,53,47,0.06)' : 'transparent'; }}
                      >ğŸ“„ Day {d.day}</div>
                    );
                  })}
                </div>
              )}
            </div>
          );
        })}
      </div>
    </>
  );
};

// ============================================================
// ITEM DETAIL SIDEBAR
// ============================================================
const ItemDetailSidebar = ({ item, type, onClose, bp }) => {
  if (!item) return null;
  const sm = bp === 'sm';
  const W = sm ? '85%' : '400px';

  return (
    <>
      <div onClick={onClose} style={{
        position: 'fixed', inset: 0, background: 'rgba(0,0,0,0.2)', zIndex: 299
      }} />
      <div style={{
        position: 'fixed', right: 0, top: 0, bottom: 0,
        width: W, background: '#fff',
        boxShadow: '-2px 0 8px rgba(0,0,0,0.08)',
        overflowY: 'auto', zIndex: 300,
        animation: 'slideIn 0.25s ease',
        padding: '24px'
      }}>
        <style>{`@keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }`}</style>

        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '20px' }}>
          <div style={{ fontSize: '20px' }}>
            {{ meal: 'ğŸ½ï¸', attraction: 'ğŸ“', entertainment: 'ğŸ­', accommodation: 'ğŸ¨', transportation: item.icon || 'ğŸš„' }[type] || 'ğŸ“„'}
          </div>
          <button onClick={onClose} style={{
            background: 'none', border: 'none', cursor: 'pointer',
            fontSize: '20px', color: '#b4b4b4', padding: '4px 8px'
          }}>âœ•</button>
        </div>

        {item.image && (
          <div style={{
            width: '100%', height: '200px', borderRadius: '8px',
            overflow: 'hidden', marginBottom: '20px', background: '#f5f3ef'
          }}>
            <img src={item.image} alt="" style={{ width: '100%', height: '100%', objectFit: 'cover' }}
              onError={e => e.target.style.display = 'none'} />
          </div>
        )}

        <h2 style={{ fontSize: '24px', fontWeight: '700', color: '#37352f', margin: '0 0 4px' }}>
          {item.name}
        </h2>
        {item.name_en && (
          <div style={{ fontSize: '14px', color: '#9b9a97', marginBottom: '20px' }}>{item.name_en}</div>
        )}
        {item.name_cn && (
          <div style={{ fontSize: '14px', color: '#9b9a97', marginBottom: '20px' }}>{item.name_cn}</div>
        )}

        <div style={{ borderTop: '1px solid #f0efed', paddingTop: '16px' }}>
          {item.time && (
            <PropertyRow label="Time">
              {item.time.start} â€“ {item.time.end}
            </PropertyRow>
          )}
          {item.cost !== undefined && (
            <PropertyRow label="Cost">
              {item.cost === 0 ? 'Free' : `${item.cost.toFixed(2)} CNY`}
              {item.cost_eur && ` (â‚¬${item.cost_eur.toFixed(2)})`}
            </PropertyRow>
          )}
          {item.cuisine && <PropertyRow label="Cuisine">{item.cuisine}</PropertyRow>}
          {item.signature_dishes && <PropertyRow label="Signature Dishes">{item.signature_dishes}</PropertyRow>}
          {item.type && <PropertyRow label="Type">{item.type}</PropertyRow>}
          {item.location && <PropertyRow label="Location">{item.location}</PropertyRow>}
          {item.opening_hours && <PropertyRow label="Opening Hours">{item.opening_hours}</PropertyRow>}
          {item.recommended_duration && <PropertyRow label="Duration">{item.recommended_duration}</PropertyRow>}
          {item.duration && <PropertyRow label="Duration">{item.duration}</PropertyRow>}
          {item.stars && (
            <PropertyRow label="Stars">
              <span style={{ color: '#e9b200', letterSpacing: '1px' }}>{'â˜…'.repeat(item.stars)}</span>
            </PropertyRow>
          )}
          {item.departure_point && <PropertyRow label="From">{item.departure_point}</PropertyRow>}
          {item.arrival_point && <PropertyRow label="To">{item.arrival_point}</PropertyRow>}
          {item.transport_type && <PropertyRow label="Type">{item.transport_type}</PropertyRow>}
          {item.route_number && item.route_number !== 'VERIFIED' && (
            <PropertyRow label="Route Number">{item.route_number}</PropertyRow>
          )}
          {item.airline && <PropertyRow label="Airline">{item.airline}</PropertyRow>}
          {item.departure_time && <PropertyRow label="Departure">{item.departure_time}</PropertyRow>}
          {item.arrival_time && <PropertyRow label="Arrival">{item.arrival_time}</PropertyRow>}
          {item.booking_status && (
            <PropertyRow label="Booking Status">
              <span style={{
                display: 'inline-block',
                padding: '4px 10px',
                borderRadius: '4px',
                fontSize: '11px',
                fontWeight: '600',
                background: item.booking_status.includes('URGENT') ? '#fff4e6' :
                           item.booking_status.includes('VERIFIED') ? '#e9f5ec' : '#edf2fc',
                color: item.booking_status.includes('URGENT') ? '#d97706' :
                      item.booking_status.includes('VERIFIED') ? '#1a7a32' : '#2b63b5',
                border: `1px solid ${item.booking_status.includes('URGENT') ? '#fed7aa' :
                                    item.booking_status.includes('VERIFIED') ? '#a2d9b1' : '#bdd7f0'}`
              }}>
                {item.booking_status}
              </span>
            </PropertyRow>
          )}
          {item.highlights && item.highlights.length > 0 && (
            <div style={{ marginTop: '16px' }}>
              <div style={{ fontSize: '13px', fontWeight: '600', color: '#37352f', marginBottom: '8px' }}>
                Highlights
              </div>
              <ul style={{ margin: 0, paddingLeft: '20px', fontSize: '14px', lineHeight: 1.8, color: '#37352f' }}>
                {item.highlights.map((h, i) => <li key={i}>{h}</li>)}
              </ul>
            </div>
          )}
          {item.booking_urgency && (
            <div style={{
              marginTop: '16px', padding: '12px 16px',
              background: '#fff4e6', borderRadius: '6px',
              border: '1px solid #fed7aa', fontSize: '13px', color: '#9a6700'
            }}>
              âš ï¸ {item.booking_urgency}
            </div>
          )}
          {item.note && (
            <div style={{
              marginTop: '16px', padding: '12px 16px',
              background: '#fffdf5', borderRadius: '6px',
              border: '1px solid #f5ecd7', fontSize: '13px', color: '#9a6700'
            }}>
              ğŸ’¡ {item.note}
            </div>
          )}
          {item.notes && (
            <div style={{
              marginTop: '16px', padding: '12px 16px',
              background: '#f5f9fc', borderRadius: '6px',
              border: '1px solid #d9e8f5', fontSize: '13px', color: '#37352f', lineHeight: 1.6
            }}>
              {item.notes}
            </div>
          )}
          {item.links && Object.keys(item.links).length > 0 && (
            <div style={{ marginTop: '20px' }}>
              <div style={{ fontSize: '13px', fontWeight: '600', color: '#37352f', marginBottom: '8px' }}>
                Links
              </div>
              <LinksRow links={item.links} />
            </div>
          )}
        </div>
      </div>
    </>
  );
};

// ============================================================
// BUDGET DETAIL SIDEBAR
// ============================================================
const BudgetDetailSidebar = ({ category, items, total, onClose, bp }) => {
  if (!category) return null;
  const sm = bp === 'sm';
  const W = sm ? '85%' : '400px';

  const categoryConfig = {
    meals: { icon: 'ğŸ½ï¸', label: 'Meals', color: '#f0b429' },
    attractions: { icon: 'ğŸ“', label: 'Attractions', color: '#4a90d9' },
    entertainment: { icon: 'ğŸ­', label: 'Entertainment', color: '#9b6dd7' },
    accommodation: { icon: 'ğŸ¨', label: 'Accommodation', color: '#45b26b' }
  };
  const cfg = categoryConfig[category] || { icon: 'ğŸ’°', label: 'Budget', color: '#37352f' };

  return (
    <>
      <div onClick={onClose} style={{
        position: 'fixed', inset: 0, background: 'rgba(0,0,0,0.2)', zIndex: 299
      }} />
      <div style={{
        position: 'fixed', right: 0, top: 0, bottom: 0,
        width: W, background: '#fff',
        boxShadow: '-2px 0 8px rgba(0,0,0,0.08)',
        overflowY: 'auto', zIndex: 300,
        animation: 'slideIn 0.25s ease',
        padding: '24px'
      }}>
        <style>{`@keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }`}</style>

        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '24px' }}>
          <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
            <div style={{ fontSize: '24px' }}>{cfg.icon}</div>
            <h2 style={{ fontSize: '20px', fontWeight: '700', color: '#37352f', margin: 0 }}>
              {cfg.label}
            </h2>
          </div>
          <button onClick={onClose} style={{
            background: 'none', border: 'none', cursor: 'pointer',
            fontSize: '20px', color: '#b4b4b4', padding: '4px 8px'
          }}>âœ•</button>
        </div>

        {items && items.length > 0 ? (
          <div>
            {items.map((item, i) => (
              <div key={i} style={{
                padding: '14px 16px',
                background: '#fbfbfa',
                borderRadius: '6px',
                border: '1px solid #f0efed',
                marginBottom: '10px'
              }}>
                <div style={{ fontSize: '14px', fontWeight: '600', color: '#37352f', marginBottom: '4px' }}>
                  {item.name}
                </div>
                {item.name_en && (
                  <div style={{ fontSize: '12px', color: '#9b9a97', marginBottom: '6px' }}>{item.name_en}</div>
                )}
                {item.name_cn && (
                  <div style={{ fontSize: '12px', color: '#9b9a97', marginBottom: '6px' }}>{item.name_cn}</div>
                )}
                <div style={{
                  display: 'flex', justifyContent: 'space-between',
                  fontSize: '14px', marginTop: '8px'
                }}>
                  <span style={{ color: '#9b9a97' }}>Cost</span>
                  <span style={{ fontWeight: '600', color: cfg.color }}>
                    {item.cost === 0 ? 'Free' : `${item.cost.toFixed(2)} CNY`}
                  </span>
                </div>
              </div>
            ))}

            <div style={{
              marginTop: '20px', paddingTop: '16px',
              borderTop: '2px solid #edece9'
            }}>
              <div style={{
                display: 'flex', justifyContent: 'space-between',
                fontSize: '16px', fontWeight: '700', color: '#37352f'
              }}>
                <span>Total</span>
                <span style={{ color: cfg.color }}>{total.toFixed(2)} CNY</span>
              </div>
            </div>
          </div>
        ) : (
          <div style={{ padding: '40px 20px', textAlign: 'center', color: '#9b9a97' }}>
            <div style={{ fontSize: '48px', marginBottom: '12px' }}>{cfg.icon}</div>
            <div style={{ fontSize: '14px' }}>No items in this category</div>
          </div>
        )}
      </div>
    </>
  );
};

// ============================================================
// KANBAN VIEW
// ============================================================
const KanbanView = ({ day, tripSummary, showSummary, bp, onItemClick, onBudgetClick }) => {
  const sm = bp === 'sm';
  const px = sm ? '16px' : bp === 'md' ? '32px' : '48px';

  return (
    <div style={{ maxWidth: '960px' }}>
      <div style={{
        width: '100%',
        height: sm ? '120px' : '200px',
        background: `linear-gradient(to bottom, rgba(0,0,0,0) 50%, rgba(0,0,0,0.03) 100%), url(${day.cover || 'https://images.unsplash.com/photo-1609766856923-7e0a23024e9c?w=1200&h=400&fit=crop'})`,
        backgroundSize: 'cover', backgroundPosition: 'center'
      }} />

      <div style={{ padding: `0 ${px}` }}>
        <div style={{ marginTop: sm ? '-24px' : '-36px', marginBottom: '24px' }}>
          <div style={{ fontSize: sm ? '40px' : '56px', lineHeight: 1, marginBottom: '8px' }}>ğŸ—ºï¸</div>

          {showSummary ? (
            <>
              <h1 style={{ fontSize: sm ? '24px' : '36px', fontWeight: '700', color: '#37352f', margin: '0 0 20px', lineHeight: 1.25 }}>
                {tripSummary.description}
              </h1>
              <div style={{
                padding: sm ? '12px' : '16px 20px',
                background: '#fbfbfa', borderRadius: '8px',
                border: '1px solid #f0efed', marginBottom: '32px'
              }}>
                <PropertyRow label="Trip Type">{tripSummary.trip_type}</PropertyRow>
                {tripSummary.base_location && <PropertyRow label="Base Location">{tripSummary.base_location}</PropertyRow>}
                <PropertyRow label="Period">{tripSummary.period}</PropertyRow>
                <PropertyRow label="Travelers">{tripSummary.travelers}</PropertyRow>
                <PropertyRow label="Budget / Trip">{tripSummary.budget_per_trip}</PropertyRow>
                <PropertyRow label="Preferences">{tripSummary.preferences}</PropertyRow>
              </div>
            </>
          ) : (
            <h1 style={{ fontSize: sm ? '24px' : '36px', fontWeight: '700', color: '#37352f', margin: '0 0 24px', lineHeight: 1.25 }}>
              Day {day.day} â€“ {day.location}
            </h1>
          )}

          {showSummary && (
            <h2 style={{ fontSize: sm ? '20px' : '26px', fontWeight: '700', color: '#37352f', margin: '0 0 28px' }}>
              Day {day.day} â€“ {day.location}
            </h2>
          )}
        </div>

        {/* User Plans */}
        {day.user_plans && day.user_plans.length > 0 && (
          <Section title="User Plans" icon="ğŸ“">
            <div style={{
              padding: '14px 18px', background: '#fafafa', borderRadius: '6px',
              border: '1px solid #f0efed'
            }}>
              <ul style={{ margin: 0, padding: '0 0 0 18px', fontSize: '14px', lineHeight: 2, color: '#37352f' }}>
                {day.user_plans.map((p, i) => <li key={i}>{p}</li>)}
              </ul>
            </div>
          </Section>
        )}

        {/* Meals */}
        <Section title="Meals" icon="ğŸ½ï¸">
          <div style={{ display: 'grid', gridTemplateColumns: sm ? '1fr' : 'repeat(3, 1fr)', gap: '14px' }}>
            {['breakfast', 'lunch', 'dinner'].map(type => {
              const meal = day.meals[type];
              if (!meal) return null;
              const lb = { breakfast: 'ğŸŒ… Breakfast', lunch: 'â˜€ï¸ Lunch', dinner: 'ğŸŒ™ Dinner' }[type];
              return (
                <div key={type} style={{
                  background: '#fff', borderRadius: '8px',
                  boxShadow: '0 1px 3px rgba(0,0,0,0.04), 0 0 0 1px rgba(0,0,0,0.03)',
                  overflow: 'hidden', transition: 'box-shadow .15s', cursor: 'pointer'
                }}
                  onClick={() => onItemClick && onItemClick(meal, 'meal')}
                  onMouseEnter={e => e.currentTarget.style.boxShadow = '0 2px 8px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.04)'}
                  onMouseLeave={e => e.currentTarget.style.boxShadow = '0 1px 3px rgba(0,0,0,0.04), 0 0 0 1px rgba(0,0,0,0.03)'}
                >
                  <div style={{ width: '100%', height: sm ? '100px' : '130px', overflow: 'hidden', background: '#f5f3ef' }}>
                    <img src={meal.image} alt="" style={{ width: '100%', height: '100%', objectFit: 'cover' }}
                      onError={e => { e.target.style.display = 'none'; }} />
                  </div>
                  <div style={{ padding: '12px 14px' }}>
                    <div style={{ fontSize: '13px', fontWeight: '600', color: '#37352f', marginBottom: '6px' }}>
                      {lb}: {meal.name}
                    </div>
                    {meal.name_en && <div style={{ fontSize: '12px', color: '#9b9a97', marginBottom: '6px' }}>{meal.name_en}</div>}
                    <div style={{ fontSize: '12px', color: '#6b6b6b', lineHeight: 1.7 }}>
                      <div><span style={{ color: '#9b9a97' }}>Cost</span> {meal.cost === 0 ? 'Free' : `${meal.cost.toFixed(2)} CNY`}</div>
                      {meal.cuisine && <div><span style={{ color: '#9b9a97' }}>Cuisine</span> {meal.cuisine}</div>}
                      {meal.signature_dishes && !sm && <div><span style={{ color: '#9b9a97' }}>Signature</span> {meal.signature_dishes}</div>}
                    </div>
                    <LinksRow links={meal.links} compact={sm} />
                  </div>
                </div>
              );
            })}
          </div>
        </Section>

        {/* Attractions + Right column */}
        <div style={{ display: 'grid', gridTemplateColumns: sm ? '1fr' : '1fr 1fr', gap: '24px' }}>
          {/* Attractions */}
          <Section title="Attractions" icon="ğŸ“">
            {day.attractions.map((attr, i) => (
              <div key={i} style={{
                background: '#fff', borderRadius: '8px',
                boxShadow: '0 1px 3px rgba(0,0,0,0.04), 0 0 0 1px rgba(0,0,0,0.03)',
                overflow: 'hidden', marginBottom: '14px', transition: 'box-shadow .15s', cursor: 'pointer'
              }}
                onClick={() => onItemClick && onItemClick(attr, 'attraction')}
                onMouseEnter={e => e.currentTarget.style.boxShadow = '0 2px 8px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.04)'}
                onMouseLeave={e => e.currentTarget.style.boxShadow = '0 1px 3px rgba(0,0,0,0.04), 0 0 0 1px rgba(0,0,0,0.03)'}
              >
                {sm ? (
                  <>
                    <div style={{ height: '110px', overflow: 'hidden', background: '#eef4f9' }}>
                      <img src={attr.image} alt="" style={{ width: '100%', height: '100%', objectFit: 'cover' }} onError={e => e.target.style.display = 'none'} />
                    </div>
                    <div style={{ padding: '12px 14px' }}>
                      <div style={{ fontSize: '14px', fontWeight: '600', color: '#37352f', marginBottom: '4px' }}>{attr.name}</div>
                      {attr.name_en && <div style={{ fontSize: '12px', color: '#9b9a97', marginBottom: '6px' }}>{attr.name_en}</div>}
                      <PropLine label="Cost" value={attr.cost === 0 ? 'Free' : `${attr.cost.toFixed(2)} CNY${attr.cost_eur ? ` (â‚¬${attr.cost_eur.toFixed(2)})` : ''}`} />
                      <PropLine label="Hours" value={attr.opening_hours} />
                      <PropLine label="Duration" value={attr.recommended_duration} />
                      <LinksRow links={attr.links} compact />
                    </div>
                  </>
                ) : (
                  <div style={{ display: 'flex' }}>
                    <div style={{ width: '140px', flexShrink: 0, overflow: 'hidden', background: '#eef4f9' }}>
                      <img src={attr.image} alt="" style={{ width: '100%', height: '100%', objectFit: 'cover', minHeight: '160px' }} onError={e => e.target.style.display = 'none'} />
                    </div>
                    <div style={{ padding: '14px 16px', flex: 1, lineHeight: 1.7 }}>
                      <div style={{ fontSize: '14px', fontWeight: '600', color: '#37352f', marginBottom: '2px' }}>{attr.name}</div>
                      {attr.name_en && <div style={{ fontSize: '12px', color: '#9b9a97', marginBottom: '8px' }}>{attr.name_en}</div>}
                      {attr.location && <PropLine label="Location" value={attr.location} />}
                      <PropLine label="Type" value={attr.type} />
                      <PropLine label="Cost" value={attr.cost === 0 ? 'Free' : `${attr.cost.toFixed(2)} CNY${attr.cost_eur ? ` (â‚¬${attr.cost_eur.toFixed(2)})` : ''}`} />
                      <PropLine label="Hours" value={attr.opening_hours} />
                      <PropLine label="Duration" value={attr.recommended_duration} />
                      {attr.highlights && attr.highlights.length > 0 && (
                        <div style={{ marginTop: '6px' }}>
                          <span style={{ fontSize: '12px', color: '#9b9a97' }}>Highlights</span>
                          <ul style={{ margin: '2px 0 0', paddingLeft: '16px', fontSize: '12px', color: '#37352f', lineHeight: 1.7 }}>
                            {attr.highlights.map((h, j) => <li key={j}>{h}</li>)}
                          </ul>
                        </div>
                      )}
                      <LinksRow links={attr.links} />
                    </div>
                  </div>
                )}
              </div>
            ))}
          </Section>

          {/* Right column */}
          <div>
            {day.entertainment?.length > 0 && (
              <Section title="Entertainment" icon="ğŸ­">
                {day.entertainment.map((ent, i) => (
                  <div key={i} style={{
                    background: '#fff', borderRadius: '8px',
                    boxShadow: '0 1px 3px rgba(0,0,0,0.04), 0 0 0 1px rgba(0,0,0,0.03)',
                    overflow: 'hidden', marginBottom: '10px', cursor: 'pointer'
                  }}
                    onClick={() => onItemClick && onItemClick(ent, 'entertainment')}
                  >
                    {ent.image && (
                      <div style={{ width: '100%', height: sm ? '100px' : '120px', overflow: 'hidden', background: '#f5f3ef' }}>
                        <img src={ent.image} alt="" style={{ width: '100%', height: '100%', objectFit: 'cover' }}
                          onError={e => { e.target.style.display = 'none'; }} />
                      </div>
                    )}
                    <div style={{ padding: '14px 16px' }}>
                      <div style={{ fontSize: '14px', fontWeight: '600', color: '#37352f', marginBottom: '8px' }}>{ent.name}</div>
                      {ent.name_en && <div style={{ fontSize: '12px', color: '#9b9a97', marginBottom: '6px' }}>{ent.name_en}</div>}
                      <PropLine label="Type" value={ent.type} />
                      <PropLine label="Cost" value={ent.cost === 0 ? 'Free' : `${ent.cost.toFixed(2)} CNY`} />
                      <PropLine label="Duration" value={ent.duration} />
                      {ent.note && (
                        <div style={{ marginTop: '8px', padding: '8px 12px', background: '#fffdf5', borderRadius: '5px', border: '1px solid #f5ecd7', fontSize: '12px', color: '#9a6700' }}>
                          ğŸ’¡ {ent.note}
                        </div>
                      )}
                      <LinksRow links={ent.links} compact={sm} />
                    </div>
                  </div>
                ))}
              </Section>
            )}

            {day.accommodation && (
              <Section title="Accommodation" icon="ğŸ¨">
                <div style={{
                  background: '#fff', borderRadius: '8px',
                  boxShadow: '0 1px 3px rgba(0,0,0,0.04), 0 0 0 1px rgba(0,0,0,0.03)',
                  overflow: 'hidden', cursor: 'pointer'
                }}
                  onClick={() => onItemClick && onItemClick(day.accommodation, 'accommodation')}
                >
                  {day.accommodation.image && (
                    <div style={{ width: '100%', height: sm ? '120px' : '160px', overflow: 'hidden', background: '#f5f3ef' }}>
                      <img src={day.accommodation.image} alt="" style={{ width: '100%', height: '100%', objectFit: 'cover' }}
                        onError={e => { e.target.style.display = 'none'; }} />
                    </div>
                  )}
                  <div style={{ padding: '14px 16px' }}>
                    <div style={{ fontSize: '14px', fontWeight: '600', color: '#37352f', marginBottom: '4px' }}>{day.accommodation.name}</div>
                    {day.accommodation.name_cn && <div style={{ fontSize: '12px', color: '#9b9a97', marginBottom: '8px' }}>{day.accommodation.name_cn}</div>}
                    <PropLine label="Type" value={day.accommodation.type} />
                    <PropLine label="Stars" value={<span style={{ color: '#e9b200', letterSpacing: '1px' }}>{'â˜…'.repeat(day.accommodation.stars)}</span>} />
                    <PropLine label="Location" value={day.accommodation.location} />
                    <PropLine label="Cost" value={day.accommodation.cost === 0 ? 'Free' : `${day.accommodation.cost.toFixed(2)} CNY`} />
                    <LinksRow links={day.accommodation.links} compact={sm} />
                  </div>
                </div>
              </Section>
            )}

            {day.transportation && (
              <Section title="Transportation" icon={day.transportation.icon}>
                <div style={{
                  background: '#fff', borderRadius: '8px',
                  boxShadow: '0 1px 3px rgba(0,0,0,0.04), 0 0 0 1px rgba(0,0,0,0.03)',
                  overflow: 'hidden'
                }}>
                  <div style={{ padding: '14px 16px' }}>
                    <div style={{ fontSize: '14px', fontWeight: '600', color: '#37352f', marginBottom: '8px', display: 'flex', alignItems: 'center', gap: '6px' }}>
                      {day.transportation.icon} {day.transportation.from} â†’ {day.transportation.to}
                    </div>
                    <PropLine label="Route" value={`${day.transportation.departure_point} â†’ ${day.transportation.arrival_point}`} />
                    <PropLine label="Type" value={day.transportation.transport_type} />
                    {day.transportation.route_number && day.transportation.route_number !== 'VERIFIED' && (
                      <PropLine label="Route #" value={day.transportation.route_number} />
                    )}
                    {day.transportation.airline && (
                      <PropLine label="Airline" value={day.transportation.airline} />
                    )}
                    <PropLine label="Departure" value={day.transportation.departure_time} />
                    <PropLine label="Arrival" value={day.transportation.arrival_time} />
                    {day.transportation.cost > 0 && (
                      <PropLine label="Cost" value={`${day.transportation.cost.toFixed(2)} USD`} />
                    )}
                    {day.transportation.booking_status && (
                      <div style={{ marginTop: '8px' }}>
                        <span style={{
                          display: 'inline-block',
                          padding: '4px 10px',
                          borderRadius: '4px',
                          fontSize: '11px',
                          fontWeight: '600',
                          background: day.transportation.booking_status.includes('URGENT') ? '#fff4e6' :
                                     day.transportation.booking_status.includes('VERIFIED') ? '#e9f5ec' : '#edf2fc',
                          color: day.transportation.booking_status.includes('URGENT') ? '#d97706' :
                                day.transportation.booking_status.includes('VERIFIED') ? '#1a7a32' : '#2b63b5',
                          border: `1px solid ${day.transportation.booking_status.includes('URGENT') ? '#fed7aa' :
                                              day.transportation.booking_status.includes('VERIFIED') ? '#a2d9b1' : '#bdd7f0'}`
                        }}>
                          {day.transportation.booking_status}
                        </span>
                      </div>
                    )}
                    {day.transportation.booking_urgency && (
                      <div style={{
                        marginTop: '8px',
                        padding: '10px 12px',
                        background: '#fff4e6',
                        borderRadius: '6px',
                        border: '1px solid #fed7aa',
                        fontSize: '12px',
                        color: '#9a6700',
                        lineHeight: 1.6
                      }}>
                        âš ï¸ {day.transportation.booking_urgency}
                      </div>
                    )}
                    {day.transportation.notes && !sm && (
                      <div style={{
                        marginTop: '8px',
                        padding: '10px 12px',
                        background: '#f5f9fc',
                        borderRadius: '6px',
                        border: '1px solid #d9e8f5',
                        fontSize: '12px',
                        color: '#37352f',
                        lineHeight: 1.6
                      }}>
                        {day.transportation.notes}
                      </div>
                    )}
                  </div>
                </div>
              </Section>
            )}

            <Section title="Budget" icon="ğŸ’°">
              <div style={{
                background: '#fff', borderRadius: '8px',
                boxShadow: '0 1px 3px rgba(0,0,0,0.04), 0 0 0 1px rgba(0,0,0,0.03)',
                padding: '16px'
              }}>
                <div style={{ display: 'flex', alignItems: sm ? 'center' : 'center', gap: '20px', flexDirection: sm ? 'column' : 'row' }}>
                  <Donut budget={day.budget} size={sm ? 72 : 88} onBudgetClick={onBudgetClick} day={day} />
                  <div style={{ fontSize: '13px', color: '#6b6b6b', lineHeight: 2, flex: 1, width: '100%' }}>
                    {[
                      { k: 'meals', l: 'Meals', c: '#f0b429' },
                      { k: 'attractions', l: 'Attractions', c: '#4a90d9' },
                      { k: 'entertainment', l: 'Entertainment', c: '#9b6dd7' },
                      { k: 'accommodation', l: 'Accommodation', c: '#45b26b' }
                    ].filter(r => day.budget[r.k] > 0).map(r => (
                      <div key={r.k} style={{
                        display: 'flex', alignItems: 'center', gap: '8px',
                        cursor: 'pointer', padding: '4px 6px', margin: '0 -6px',
                        borderRadius: '4px', transition: 'background .12s'
                      }}
                        onClick={() => onBudgetClick && onBudgetClick(r.k, day)}
                        onMouseEnter={e => e.currentTarget.style.background = 'rgba(55,53,47,0.04)'}
                        onMouseLeave={e => e.currentTarget.style.background = 'transparent'}
                      >
                        <span style={{ width: '10px', height: '10px', borderRadius: '3px', background: r.c, flexShrink: 0 }} />
                        <span style={{ flex: 1 }}>{r.l}</span>
                        <span style={{ fontWeight: '600', color: '#37352f' }}>{day.budget[r.k].toFixed(2)} CNY</span>
                      </div>
                    ))}
                    <div style={{ borderTop: '1px solid #edece9', marginTop: '8px', paddingTop: '8px', fontWeight: '700', color: '#37352f', display: 'flex', justifyContent: 'space-between' }}>
                      <span>Total</span><span>{day.budget.total.toFixed(2)} CNY</span>
                    </div>
                  </div>
                </div>
              </div>
            </Section>
          </div>
        </div>
      </div>
    </div>
  );
};

// ============================================================
// TIMELINE VIEW
// ============================================================
const TimelineView = ({ day, bp, onItemClick }) => {
  // Fix #6: Add z-index state for click handling of overlapping items
  const [topItemIndex, setTopItemIndex] = useState(null);
  const sm = bp === 'sm';
  const px = sm ? '16px' : bp === 'md' ? '32px' : '48px';
  const timeW = sm ? '48px' : '62px';

  const entries = [];
  const add = (item, type, label) => {
    // Only add if item has valid time with start and end
    if (item?.time?.start && item?.time?.end) {
      entries.push({ ...item, _type: type, _label: label });
    }
  };
  // Add transportation if exists (Fix Issue #8)
  if (day.transportation) add(day.transportation, 'transportation', `${day.transportation.from}â†’${day.transportation.to}`);
  add(day.meals.breakfast, 'meal', 'Breakfast');
  add(day.meals.lunch, 'meal', 'Lunch');
  add(day.meals.dinner, 'meal', 'Dinner');
  day.attractions?.forEach(a => add(a, 'attraction', 'Attraction'));
  day.entertainment?.forEach(e => add(e, 'entertainment', 'Entertainment'));
  if (day.accommodation) add(day.accommodation, 'accommodation', 'Check-in');

  // Sort by start time
  entries.sort((a, b) => a.time.start.localeCompare(b.time.start));

  const firstH = entries.length ? parseInt(entries[0].time.start) : 8;
  const lastH = entries.length ? Math.min(parseInt(entries[entries.length - 1].time.start) + 2, 24) : 20;
  const hours = []; for (let h = firstH; h <= lastH; h++) hours.push(h);

  const hH = sm ? 68 : 80;
  const typeStyle = {
    transportation: { bg: '#f0f9ff', border: '#7dd3fc', dot: '#0ea5e9' },
    meal: { bg: '#fffdf5', border: '#ebd984', dot: '#f0b429' },
    attraction: { bg: '#f6fafd', border: '#a8cceb', dot: '#4a90d9' },
    entertainment: { bg: '#faf6fd', border: '#c9aee6', dot: '#9b6dd7' },
    accommodation: { bg: '#f5fbf6', border: '#a2d9b1', dot: '#45b26b' }
  };

  const top = (t) => { const [h, m] = t.split(':').map(Number); return (h - firstH) * hH + (m / 60) * hH; };
  const hgt = (s, e) => Math.max(top(e) - top(s), sm ? 56 : 64);

  // Debug: log entries count
  if (entries.length === 0) {
    console.warn('Timeline has no entries for day:', day.day, day.location);
  }

  return (
    <div style={{ maxWidth: '900px' }}>
      <div style={{
        width: '100%', height: sm ? '100px' : '160px',
        background: `url(${day.cover || 'https://images.unsplash.com/photo-1609766856923-7e0a23024e9c?w=1200&h=400&fit=crop'})`,
        backgroundSize: 'cover', backgroundPosition: 'center'
      }} />

      <div style={{ padding: `0 ${px}` }}>
        <div style={{ marginTop: sm ? '-20px' : '-30px', marginBottom: '24px' }}>
          <div style={{ fontSize: sm ? '36px' : '48px', lineHeight: 1, marginBottom: '6px' }}>ğŸ“</div>
          <h2 style={{ fontSize: sm ? '22px' : '28px', fontWeight: '700', color: '#37352f', margin: 0 }}>
            Day {day.day} â€“ {day.location}
          </h2>
        </div>

        {entries.length === 0 ? (
          <div style={{ padding: '40px 20px', textAlign: 'center', color: '#9b9a97' }}>
            <div style={{ fontSize: '48px', marginBottom: '16px' }}>â°</div>
            <div style={{ fontSize: '16px', marginBottom: '8px' }}>No timeline data available</div>
            <div style={{ fontSize: '13px' }}>This day has no scheduled activities with time information</div>
          </div>
        ) : (
          <div style={{ display: 'flex', position: 'relative' }}>
          <div style={{ width: timeW, flexShrink: 0 }}>
            {hours.map(h => (
              <div key={h} style={{ height: hH, fontSize: '12px', color: '#c4c4c0', fontFamily: 'ui-monospace, monospace', paddingTop: '2px' }}>
                {String(h).padStart(2, '0')}:00
              </div>
            ))}
          </div>

          <div style={{ flex: 1, position: 'relative', borderLeft: '1px dashed #e5e4e1', minWidth: 0 }}>
            {hours.map(h => <div key={h} style={{ height: hH, borderBottom: '1px solid #f5f5f3' }} />)}

            {entries.map((entry, i) => {
              const st = typeStyle[entry._type] || typeStyle.attraction;
              const t = top(entry.time.start);
              const h = hgt(entry.time.start, entry.time.end);
              // Fix #6: Use dynamic z-index based on click state
              const isTop = topItemIndex === i;
              const zIdx = isTop ? 10 : 2;
              return (
                <div key={i} style={{
                  position: 'absolute', top: t, left: '10px', right: '10px',
                  minHeight: h - 4,
                  background: st.bg, borderLeft: `3px solid ${st.border}`,
                  borderRadius: '6px', padding: sm ? '8px 10px' : '10px 14px',
                  display: 'flex', gap: '10px', alignItems: 'flex-start',
                  boxShadow: isTop ? '0 4px 12px rgba(0,0,0,0.12)' : '0 1px 3px rgba(0,0,0,0.04)',
                  zIndex: zIdx, overflow: 'hidden', transition: 'all .15s', cursor: 'pointer'
                }}
                  onClick={() => { setTopItemIndex(i); onItemClick && onItemClick(entry, entry._type); }}
                  onMouseEnter={e => { if (!isTop) e.currentTarget.style.boxShadow = '0 2px 8px rgba(0,0,0,0.08)'; }}
                  onMouseLeave={e => { if (!isTop) e.currentTarget.style.boxShadow = '0 1px 3px rgba(0,0,0,0.04)'; }}
                >
                  <div style={{
                    position: 'absolute', left: '-8px', top: '50%', transform: 'translateY(-50%)',
                    width: '8px', height: '8px', borderRadius: '50%',
                    background: st.dot, border: '2px solid #fff'
                  }} />

                  {entry.image && !sm && (
                    <div style={{ width: '50px', height: '50px', borderRadius: '6px', overflow: 'hidden', flexShrink: 0 }}>
                      <img src={entry.image} alt="" style={{ width: '100%', height: '100%', objectFit: 'cover' }} onError={e => e.target.style.display = 'none'} />
                    </div>
                  )}
                  <div style={{ flex: 1, minWidth: 0 }}>
                    <div style={{ fontSize: '11px', color: '#b4b4b4' }}>{entry.time.start} â€“ {entry.time.end}</div>
                    <div style={{
                      fontSize: sm ? '12px' : '14px', fontWeight: '600', color: '#37352f',
                      whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis'
                    }}>
                      {entry._type === 'transportation' ? (
                        <span>{entry.icon} {entry._label}</span>
                      ) : (
                        <span>{entry._label}: {entry.name}</span>
                      )}
                    </div>
                    {entry._type === 'transportation' ? (
                      <div style={{ fontSize: '11px', color: '#9b9a97', marginTop: '2px', lineHeight: 1.5 }}>
                        <div>{entry.departure_point} â†’ {entry.arrival_point}</div>
                        {entry.route_number && entry.route_number !== 'VERIFIED' && (
                          <div>{entry.transport_type} {entry.route_number}</div>
                        )}
                        {entry.booking_status && (
                          <span style={{
                            display: 'inline-block',
                            marginTop: '2px',
                            padding: '2px 6px',
                            borderRadius: '3px',
                            fontSize: '10px',
                            fontWeight: '600',
                            background: entry.booking_status.includes('URGENT') ? '#fff4e6' :
                                       entry.booking_status.includes('VERIFIED') ? '#e9f5ec' : '#edf2fc',
                            color: entry.booking_status.includes('URGENT') ? '#d97706' :
                                  entry.booking_status.includes('VERIFIED') ? '#1a7a32' : '#2b63b5'
                          }}>
                            {entry.booking_status}
                          </span>
                        )}
                      </div>
                    ) : (
                      <div style={{ display: 'flex', alignItems: 'center', gap: '6px', fontSize: '11px', color: '#9b9a97', flexWrap: 'wrap', marginTop: '2px' }}>
                        {entry.recommended_duration && <span>â± {entry.recommended_duration}</span>}
                        {entry.cost !== undefined && (
                          <span style={{
                            padding: '1px 6px', borderRadius: '3px', fontWeight: '600',
                            background: entry.cost === 0 ? '#e9f5ec' : '#f5f5f3',
                            color: entry.cost === 0 ? '#1a7a32' : '#37352f'
                          }}>
                            {entry.cost === 0 ? 'Free' : `Â¥${entry.cost.toFixed(2)}`}
                          </span>
                        )}
                        {entry.stars && <span style={{ color: '#e9b200' }}>{'â˜…'.repeat(entry.stars)}</span>}
                      </div>
                    )}
                    {entry._type !== 'transportation' && <LinksRow links={entry.links} compact={sm} />}
                  </div>
                </div>
              );
            })}
          </div>
        </div>
        )}
      </div>
    </div>
  );
};

// ============================================================
// APP
// ============================================================
function NotionTravelApp() {
  const [selTrip, setSelTrip] = useState(0);
  const [selDay, setSelDay] = useState(0);
  const [view, setView] = useState('kanban');
  const [sbOpen, setSbOpen] = useState(false);
  const [selectedItem, setSelectedItem] = useState(null);
  const [selectedBudgetCat, setSelectedBudgetCat] = useState(null);
  const bp = useBreakpoint();
  const sm = bp === 'sm';

  const trip = PLAN_DATA.trips[selTrip];
  const day = trip?.days?.[selDay];

  const handleItemClick = (item, type) => {
    setSelectedBudgetCat(null);
    setSelectedItem({ item, type });
  };

  const handleBudgetClick = (category, dayData) => {
    setSelectedItem(null);

    let items = [];
    let total = 0;

    if (category === 'meals') {
      ['breakfast', 'lunch', 'dinner'].forEach(mealType => {
        if (dayData.meals[mealType]) {
          items.push(dayData.meals[mealType]);
          total += dayData.meals[mealType].cost || 0;
        }
      });
    } else if (category === 'attractions') {
      items = dayData.attractions || [];
      total = dayData.budget.attractions || 0;
    } else if (category === 'entertainment') {
      items = dayData.entertainment || [];
      total = dayData.budget.entertainment || 0;
    } else if (category === 'accommodation') {
      items = dayData.accommodation ? [dayData.accommodation] : [];
      total = dayData.budget.accommodation || 0;
    }

    setSelectedBudgetCat({ category, items, total });
  };

  return (
    <div style={{
      display: 'flex',
      fontFamily: "ui-sans-serif, -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, 'Noto Sans SC', sans-serif",
      background: '#ffffff', minHeight: '100vh', color: '#37352f'
    }}>
      <Sidebar
        trips={PLAN_DATA.trips} selTrip={selTrip} selDay={selDay}
        onSelect={(ti, di) => { setSelTrip(ti); setSelDay(di); }}
        isOpen={sbOpen} onClose={() => setSbOpen(false)} bp={bp}
      />

      <div style={{ flex: 1, minWidth: 0 }}>
        <div style={{
          borderBottom: '1px solid #f0efed',
          padding: `0 ${sm ? '12px' : '20px'}`,
          display: 'flex', alignItems: 'center',
          position: 'sticky', top: 0, background: 'rgba(255,255,255,0.97)',
          backdropFilter: 'blur(8px)', zIndex: 50, gap: '2px'
        }}>
          {sm && (
            <button onClick={() => setSbOpen(true)} style={{
              background: 'none', border: 'none', cursor: 'pointer',
              fontSize: '17px', padding: '10px 6px 10px 2px', color: '#37352f'
            }}>â˜°</button>
          )}
          {['kanban', 'timeline'].map(m => (
            <button key={m} onClick={() => setView(m)} style={{
              padding: sm ? '10px 8px' : '11px 16px', background: 'none', border: 'none',
              borderBottom: view === m ? '2px solid #37352f' : '2px solid transparent',
              fontSize: '14px', fontWeight: view === m ? '600' : '400',
              color: view === m ? '#37352f' : '#b4b4b4',
              cursor: 'pointer', transition: 'all .12s', whiteSpace: 'nowrap'
            }}>
              {m === 'kanban' ? 'Kanban View' : 'Timeline View'}
            </button>
          ))}
        </div>

        {day ? (
          view === 'kanban'
            ? <KanbanView
                day={day}
                tripSummary={PLAN_DATA.trip_summary}
                showSummary={selDay === 0 && selTrip === 0}
                bp={bp}
                onItemClick={handleItemClick}
                onBudgetClick={handleBudgetClick}
              />
            : <TimelineView
                day={day}
                bp={bp}
                onItemClick={handleItemClick}
              />
        ) : (
          <div style={{ padding: `60px ${sm ? '16px' : '48px'}`, color: '#c4c4c0' }}>
            <div style={{ fontSize: '48px', marginBottom: '12px' }}>ğŸ—ºï¸</div>
            <div style={{ fontWeight: '500', fontSize: '16px', color: '#9b9a97' }}>{trip?.name}</div>
            <div style={{ marginTop: '4px' }}>Itinerary coming soon...</div>
          </div>
        )}

        {selectedItem && (
          <ItemDetailSidebar
            item={selectedItem.item}
            type={selectedItem.type}
            onClose={() => setSelectedItem(null)}
            bp={bp}
          />
        )}

        {selectedBudgetCat && (
          <BudgetDetailSidebar
            category={selectedBudgetCat.category}
            items={selectedBudgetCat.items}
            total={selectedBudgetCat.total}
            onClose={() => setSelectedBudgetCat(null)}
            bp={bp}
          />
        )}
      </div>
    </div>
  );
}


    // Render app
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<NotionTravelApp />);
  </script>
</body>
</html>